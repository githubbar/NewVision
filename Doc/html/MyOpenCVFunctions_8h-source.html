<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NewVision: MyOpenCVFunctions.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>MyOpenCVFunctions.h</h1><div class="fragment"><pre>00001 <span class="preprocessor">#if !defined( MYOPENCVFUNCTIONS_H )</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define MYOPENCVFUNCTIONS_H </span>
00003 <span class="preprocessor"></span><span class="preprocessor">#include "cv.h"</span>      
00004 <span class="preprocessor">#include "highgui.h"</span> 
00005 <span class="preprocessor">#include "ProgressDlg.h"</span> 
00006 <span class="preprocessor">#include "Image.h"</span>
00007 
00008 <span class="preprocessor">#include &lt;afxtempl.h&gt;</span>
00009 
00010 <span class="keyword">using</span> <span class="keyword">namespace </span>OpenCVExtensions;
00011 
00012 <span class="preprocessor">#define DEBUG_LEVEL 1</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define PI  3.14159265358979323846</span>
00014 <span class="preprocessor"></span><span class="keyword">class </span>CCritSec;
00015 <span class="comment">// ------------------------------------------------------------------------</span>
00016 <span class="preprocessor">#if DEBUG_LEVEL &gt; 0</span>
00017 <span class="preprocessor"></span><span class="preprocessor">    #define echo(s) Debug::WriteLine(s)</span>
00018 <span class="preprocessor"></span><span class="preprocessor">    #define ech(s) Debug::Write(s)</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00020 <span class="preprocessor"></span><span class="preprocessor">    #define echo(s) true</span>
00021 <span class="preprocessor"></span><span class="preprocessor">    #define ech(s) true</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#endif </span>
00023 <span class="preprocessor"></span><span class="comment">// ------------------------------------------------------------------------</span>
00024 <span class="preprocessor">#ifndef COLOR</span>
00025 <span class="preprocessor"></span><span class="keyword">static</span> CvScalar COLOR[] = {
00026         CV_RGB(0,0,255),
00027         CV_RGB(0,255,0),
00028         CV_RGB(0,255,255),
00029         CV_RGB(255,0,0),
00030         CV_RGB(255,0,255),
00031         CV_RGB(255,255,0),
00032         CV_RGB(0,0,128),
00033         CV_RGB(0,128,0),
00034         CV_RGB(0,128,128),
00035         CV_RGB(128,0,0),
00036         CV_RGB(128,0,128),
00037         CV_RGB(128,128,0),
00038         CV_RGB(0,0,196),
00039         CV_RGB(0,196,0),
00040         CV_RGB(196,0,0),
00041         CV_RGB(64,0,196),
00042         CV_RGB(0,64,128),
00043         CV_RGB(0,196,64)
00044         };
00045 <span class="preprocessor">#endif</span>
00046 <span class="preprocessor"></span>
00047 <span class="keyword">extern</span> OpenCVExtensions::Pixel HEAT_COLOR[];
00048 <span class="keyword">extern</span> <span class="keywordtype">int</span> NTEMPERATURES;
00049 <span class="comment">// ------------------------------------------------------------------------</span>
00050 
00051  <span class="comment">// temporary OpenCV buffers (clean up OpenCVmemory every frame)</span>
00052 <span class="keyword">extern</span> CvMemStorage* OpenCVmemory;
00053 <span class="comment">//extern IplImage* frame;</span>
00054 <span class="keyword">extern</span> IplImage *frameCPY, *frame_prev, *thermal, *output1, *output2, *FGMap, *FGMapDouble, *blobImg, *dilated, *rec, *floorImg, *extra2, *motionmap, *motionmapscaled, *motionmaptemp;
00055 <span class="keyword">extern</span> IplImage *mask, *lab, *weight, *l_plane, *a_plane, *b_plane;
00056 <span class="keyword">extern</span> IplImage *zbuffer, *body_zbuffer, *fbuffer, *fg, *bg, *temp;
00057 <span class="keyword">extern</span> IplImage* body_mask, *blob_mask;
00058 <span class="keyword">extern</span> IplImage* floormap;
00059 <span class="keyword">extern</span> IplImage* obstacle_disp;
00060 <span class="keyword">extern</span> IplImage* body_icon;
00061 <span class="keyword">extern</span> IplImage* region_mask;
00062 <span class="keyword">extern</span> IplImage* distance_mask;
00063 <span class="keyword">extern</span> IplImage *velx, *vely; 
00064 <span class="keyword">extern</span> IplImage *temp32; 
00065 <span class="keyword">extern</span> CvRNG rnd_seed;
00066 <span class="keyword">extern</span> CProgressDlg* progressDlg;
00067 <span class="keyword">extern</span> CCritSec m_FilterCriticalSection;
00068 <span class="comment">// ------------------------------------------------------------------------</span>
00069 <span class="comment">// --------    Mathematical functions  ---------------------------------</span>
00070 <span class="keywordtype">int</span> round(<span class="keywordtype">double</span> a);
00071 <span class="keywordtype">double</span> deg2rad(<span class="keywordtype">double</span> angle);
00072 <span class="keywordtype">double</span> rad2deg(<span class="keywordtype">double</span> angle);
00073 <span class="keywordtype">double</span> probNormal(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> mean, <span class="keywordtype">double</span> std);
00074 <span class="keywordtype">double</span> probNormalTruncated(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> mean, <span class="keywordtype">double</span> std, <span class="keywordtype">double</span> lo, <span class="keywordtype">double</span> hi, <span class="keywordtype">double</span> scale);
00075 <span class="keywordtype">double</span> log2(<span class="keywordtype">double</span> a);
00076 <span class="keywordtype">double</span> sign(<span class="keywordtype">double</span> a);
00077 
00078 <span class="comment">// ------------------------------------------------------------------------</span>
00079 <span class="comment">// --------    Drawing functions ---------------------------------</span>
00080 <span class="keywordtype">void</span> drawText(CString text, CvPoint p, IplImage* frame, CvScalar t, CvScalar bg, <span class="keywordtype">float</span> size);
00081 <span class="keywordtype">void</span> drawText(<span class="keywordtype">double</span> i, CvPoint p, IplImage* frame, CvScalar t, CvScalar bg, <span class="keywordtype">float</span> size);
00082 <span class="keywordtype">void</span> drawTextInCircle(CString text, CvPoint p, IplImage* frame, CvScalar t, CvScalar bg, <span class="keywordtype">float</span> size);
00083 <span class="keywordtype">void</span> drawTextInCircle(<span class="keywordtype">double</span> i, CvPoint p, IplImage* frame, CvScalar t, CvScalar bg, <span class="keywordtype">float</span> size);
00084 <span class="keywordtype">void</span> drawTextInRectangle(CString text, CvPoint p, IplImage* frame, CvScalar t, CvScalar bg, <span class="keywordtype">float</span> size);
00085 <span class="keywordtype">void</span> drawTextInRectangle(<span class="keywordtype">double</span> i, CvPoint p, IplImage* frame, CvScalar t, CvScalar bg, <span class="keywordtype">float</span> size);
00086 <span class="keywordtype">void</span> drawEditableToolTip(CWnd* pParent, CString&amp; text, CRect rect);
00087 <span class="keywordtype">void</span> drawStaticToolTip(CDC* pDC, CString&amp; text, CRect rect);
00088 
00089 <span class="comment">// ------------------------------------------------------------------------</span>
00090 <span class="comment">// --------    Dialogs ----------------------------------------------------</span>
00091 <span class="keywordtype">void</span> ShowProgressDialog(LPCTSTR title);
00092 <span class="keywordtype">void</span> SetProgressDialogRange(<span class="keywordtype">int</span> start, <span class="keywordtype">int</span> stop);
00093 <span class="keywordtype">void</span> SetProgressDialogPos(<span class="keywordtype">int</span> pos);
00094 <span class="keywordtype">void</span> HideProgressDialog();
00095 <span class="comment">// ------------------------------------------------------------------------</span>
00096 <span class="keywordtype">void</span> RGB2Lab(<span class="keywordtype">double</span> R, <span class="keywordtype">double</span> G, <span class="keywordtype">double</span> B, <span class="keywordtype">double</span>* LAB);
00097 
00098 <span class="comment">// --------    Point distance functions  ---------------------------------</span>
00099 CvPoint       cvPoint( CPoint a );
00100 CPoint        cPoint( CvPoint a );
00101 CPoint        cPoint( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y );
00102 CvPoint2D32f  cvPoint2D32f( CPoint a );
00103 <span class="keywordtype">bool</span> cvPointInRect(CvPoint p, CvRect r);
00104 <span class="keywordtype">bool</span> outOfBounds(CvPoint2D32f p, IplImage* frame);
00105 <span class="keywordtype">double</span> d(CvPoint p1, CvPoint p2=cvPoint(0,0));
00106 <span class="keywordtype">double</span> d(CvPoint2D32f p1, CvPoint2D32f p2=cvPoint2D32f(0,0));
00107 <span class="keywordtype">double</span> d(CvPoint3D32f p1, CvPoint3D32f p2=cvPoint3D32f(0,0,0));
00108 <span class="keywordtype">double</span> d(CvPoint3D32f p1, CvPoint3D32f p2, CvPoint3D32f sigma);
00109 <span class="keywordtype">double</span> d_2(CvPoint p1, CvPoint p2=cvPoint(0,0));
00110 <span class="keywordtype">double</span> d_2(CvPoint2D32f p1, CvPoint2D32f p2=cvPoint2D32f(0,0));
00111 <span class="keywordtype">double</span> d_2(CvPoint3D32f p1, CvPoint3D32f p2=cvPoint3D32f(0,0,0));
00112 <span class="keywordtype">double</span> d_2(CvPoint3D32f p1, CvPoint3D32f p2, CvPoint3D32f sigma);
00113 <span class="keywordtype">double</span> angle(CvPoint2D32f p1, CvPoint2D32f p2);
00114 <span class="keywordtype">double</span> d_contour2contour(CvSeq* c1, CvSeq* c2);
00115 <span class="keywordtype">double</span> d2line(CvPoint2D32f p, CvPoint2D32f p1, CvPoint2D32f p2);
00116 <span class="keywordtype">double</span> d2lineSegment(CvPoint2D32f p, CvPoint2D32f p1, CvPoint2D32f p2);
00117 <span class="comment">// ------------------------------------------------------------------------</span>
00118 <span class="comment">// define In() operator for CArray</span>
00119 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> In(CArray&lt;T&gt;&amp; a, T n) {
00120     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i &lt; a.GetCount();i++)
00121         <span class="keywordflow">if</span> (a[i] == n)
00122             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00123     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00124 }
00125 <span class="comment">// ------------------------------------------------------------------------</span>
00126 <span class="comment">// define Find() operator for CArray</span>
00127 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">int</span> Find(CArray&lt;T&gt;&amp; a, T n) {
00128     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i &lt; a.GetCount();i++)
00129         <span class="keywordflow">if</span> (a[i] == n)
00130             <span class="keywordflow">return</span> i;
00131     <span class="keywordflow">return</span> -1;
00132 }
00133 
00134 <span class="comment">// -- Debugging functions -------------------------------------------------</span>
00135 <span class="keywordtype">void</span> bug();
00136 <span class="keywordtype">void</span> gub();
00137 <span class="keywordtype">void</span> tic();
00138 <span class="keywordtype">void</span> toc();
00139 
00140 <span class="preprocessor">#endif // !defined( MYOPENCVFUNCTIONS_H )</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon May 15 16:43:42 2006 for NewVision by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
