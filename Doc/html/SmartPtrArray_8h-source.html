<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NewVision: SmartPtrArray.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>SmartPtrArray.h</h1><div class="fragment"><pre>00001 <span class="preprocessor">#if !defined( SMARTPTRARRAY_H )</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define SMARTPTRARRAY_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include &lt;afxtempl.h&gt;</span>
00005 <span class="preprocessor">#include &lt;afx.h&gt;</span>
00006 
00007 <span class="keyword">template</span> &lt;<span class="keyword">class</span> TYPE&gt; <span class="keyword">class </span>SmartPtrArray : <span class="keyword">public</span> CArray&lt;TYPE*&gt; {
00008 <span class="keyword">public</span>:
00009     <span class="comment">// --------------------------------------------------------------------------</span>
00010     INT_PTR Add(TYPE* newElement) {
00011         <span class="keywordflow">return</span> CArray&lt;TYPE*&gt;::Add(newElement);      
00012     }
00013     <span class="comment">// --------------------------------------------------------------------------</span>
00014     INT_PTR AddCopy(TYPE* newElement) {
00015         TYPE* copy = <span class="keyword">new</span> TYPE(*newElement);
00016         <span class="keywordflow">return</span> CArray&lt;TYPE*&gt;::Add(copy);        
00017     }
00018     <span class="comment">// --------------------------------------------------------------------------</span>
00019     <span class="keywordtype">void</span> RemoveAt(INT_PTR nIndex, INT_PTR nCount = 1) {
00020         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;nCount;i++)
00021             <span class="keyword">delete</span> GetAt( nIndex+i );
00022         CArray&lt;TYPE*&gt;::RemoveAt(nIndex, nCount);
00023     }
00024     <span class="comment">// --------------------------------------------------------------------------</span>
00025     <span class="keywordtype">void</span> RemoveAll() {
00026         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; GetCount(); i++ )
00027             <span class="keyword">delete</span> GetAt( i );
00028         CArray&lt;TYPE*&gt;::RemoveAll();
00029     }
00030     <span class="comment">// --------------------------------------------------------------------------</span>
00031     <span class="keywordtype">void</span> Copy(<span class="keyword">const</span> SmartPtrArray&amp; src) {
00032         <span class="keywordtype">int</span> mi = min(GetCount(), src.GetCount());
00033         <span class="keywordtype">int</span> ma = max(GetCount(), src.GetCount());
00034         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; mi; i++ )
00035             SetAt(i, src[i]);
00036         
00037         <span class="keywordflow">if</span> (GetCount() &lt; src.GetCount()) {
00038             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = mi; i &lt; ma; i++ )
00039                 AddCopy(src[i]);
00040         }
00041         <span class="keywordflow">else</span> {
00042             RemoveAt(mi, ma-mi);
00043         }
00044     }
00045     <span class="comment">// --------------------------------------------------------------------------</span>
00046     <span class="keywordtype">void</span> SetAt(INT_PTR nIndex, TYPE* newElement) {
00047         <span class="keyword">delete</span> GetAt( nIndex );
00048         CArray&lt;TYPE*&gt;::SetAt(nIndex, <span class="keyword">new</span> TYPE(*newElement));
00049     }
00050     <span class="comment">// --------------------------------------------------------------------------</span>
00051     <span class="keywordtype">bool</span> In(TYPE* n) {
00052         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i &lt; GetCount();i++)
00053             <span class="keywordflow">if</span> ((*GetAt(i)) == n)
00054                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00055         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00056     }
00057     <span class="comment">// ------------------------------------------------------------------------</span>
00058     <span class="keywordtype">int</span> Find(TYPE* n) {
00059         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i &lt; GetCount();i++)
00060             <span class="keywordflow">if</span> ((*GetAt(i)) == n)
00061                 <span class="keywordflow">return</span> i;
00062         <span class="keywordflow">return</span> -1;
00063     }
00064     <span class="comment">// --------------------------------------------------------------------------</span>
00065     <span class="keywordtype">void</span> Sort() {
00066         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;GetCount();i++)
00067             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=i+1;j&lt;GetCount();j++) {
00068                 <span class="keywordflow">if</span> (GetAt(j-1)-&gt;Compare(GetAt(j)) &gt; 0) {
00069                     TYPE* temp = GetAt(j-1);
00070                     GetAt(j-1) = GetAt(j);
00071                     GetAt(j) = temp;
00072                 }
00073             }
00074     }
00075     <span class="comment">// --------------------------------------------------------------------------</span>
00076 };
00077 
00078 <span class="preprocessor">#endif // !defined( SMARTPTRARRAY_H )</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon May 15 16:43:43 2006 for NewVision by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
