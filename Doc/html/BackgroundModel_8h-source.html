<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NewVision: BackgroundModel.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>BackgroundModel.h</h1><div class="fragment"><pre>00001 <span class="preprocessor">#if !defined BACKGROUNDMODEL_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define BACKGROUNDMODEL_H</span>
00003 <span class="preprocessor"></span><span class="preprocessor">#pragma once</span>
00004 <span class="preprocessor"></span><span class="preprocessor">#include &lt;time.h&gt;</span>
00005 <span class="preprocessor">#include &lt;afxtempl.h&gt;</span>
00006 <span class="preprocessor">#include "cv.h"</span>      
00007 <span class="preprocessor">#include "Image.h"</span>
00008 <span class="preprocessor">#include "CodeBook.h"</span>
00009 <span class="preprocessor">#include "Model.h"</span>
00010 
00011 <span class="keyword">using</span> <span class="keyword">namespace </span>OpenCVExtensions;
00012 <span class="keyword">enum</span> BackgroundModelType {STATIC=0, ADAPTIVE=1};
00013 <span class="comment">// implements background model using codebook approach</span>
00014 <span class="comment">// </span>
00015 <span class="keyword">class </span>BackgroundModel : <span class="keyword">public</span> CArray&lt;CodeBook&gt;, <span class="keyword">public</span> Model {
00016 
00017 <span class="keyword">public</span>:
00018     <span class="keywordtype">int</span> m_CDmax;                   <span class="comment">// maximal color distortion </span>
00019     <span class="keywordtype">double</span> m_BDmin, m_BDmax;       <span class="comment">// min and max intensity distortions </span>
00020     <span class="keywordtype">int</span> m_ThermalMin, m_ThermalMax;    <span class="comment">// -max and +max thermal variations</span>
00021 
00022     <span class="keywordtype">int</span> m_mode;                    <span class="comment">// one of two different modes:</span>
00023     <span class="keywordtype">int</span> m_initStage;               <span class="comment">// 1 - use explicit learning stage</span>
00024 
00025     <span class="keywordtype">int</span> m_minAge;                  <span class="comment">// minimum age of a codeword to be successfully matched</span>
00026     <span class="keywordtype">int</span> m_trackAfterAge;           <span class="comment">// 2 - learn "on the fly" and start tracking after m_trackAfterAgePercentage </span>
00027     <span class="keywordtype">int</span> m_trackAfterAgePercentage; <span class="comment">// of codewords have reached m_trackAfterAge</span>
00028     
00029     <span class="keywordtype">int</span> m_removeStaleFreq;         <span class="comment">// (for option 2) remove stale periodically</span>
00030     <span class="keywordtype">int</span> m_staleCutoff;             <span class="comment">// consider stale when haven't seen in sequence for longer than m_StaleCutoff</span>
00031     <span class="keywordtype">int</span> m_updateFreq;              <span class="comment">// update model every N frames</span>
00032     
00033     <span class="keywordtype">int</span> m_Erode;
00034     <span class="keywordtype">int</span> m_ErodeSize;
00035     <span class="keywordtype">int</span> m_Dilate;
00036     <span class="keywordtype">int</span> m_DilateSize;
00037 
00038     <span class="keywordtype">bool</span> m_initialized;
00039 
00040     BackgroundModel(<span class="keywordtype">void</span>);
00041     ~BackgroundModel(<span class="keywordtype">void</span>);
00042 
00043     <span class="keywordtype">bool</span> Initialize();
00044     <span class="keywordtype">void</span> DeInitialize();
00045     <span class="keywordtype">bool</span> IsInitialized() { <span class="keywordflow">return</span> m_initialized; };
00046     <span class="keywordtype">void</span> Update(IplImage* frame, IplImage* thermal, <span class="keywordtype">int</span> nFrame); 
00047     <span class="keywordtype">void</span> SubtractBackground(IplImage* frame, IplImage* thermal, IplImage* FGMap, <span class="keywordtype">int</span> nFrame);
00048     <span class="keywordtype">void</span> SubtractBackgroundProbabilistic(IplImage* frame, IplImage* thermal, IplImage* FGMapDouble, <span class="keywordtype">int</span> nFrame);
00049     <span class="keywordtype">void</span> Draw(IplImage* frame);
00050     <span class="keywordtype">void</span> GetSizes(IplImage* result);
00051     <span class="keywordtype">int</span> GetModelSizeInCodewords();
00052     <span class="keywordtype">void</span> RemoveStale();
00053     <span class="keyword">virtual</span> <span class="keywordtype">void</span> Serialize( CArchive&amp; ar );
00054 };
00055 <span class="preprocessor">#endif // !defined( BACKGROUNDMODEL_H )</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon May 15 16:43:42 2006 for NewVision by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
