<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>New Vision: F:/My Documents/Visual Studio 2005/Projects/NewVision/NewVision/Globals.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>F:/My Documents/Visual Studio 2005/Projects/NewVision/NewVision/Globals.cpp</h1><a href="_globals_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include "<a class="code" href="_std_afx_8h.html">StdAfx.h</a>"</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include "<a class="code" href="_globals_8h.html">Globals.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include "<a class="code" href="_editable_tooltip_8h.html">EditableTooltip.h</a>"</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include "<a class="code" href="_new_vision_doc_8h.html">NewVisionDoc.h</a>"</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="_body_path_8h.html">BodyPath.h</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include "<a class="code" href="_floor_region_8h.html">FloorRegion.h</a>"</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="_clustering_machine_8h.html">ClusteringMachine.h</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="_swarm_event_8h.html">SwarmEvent.h</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="_swarm_activity_8h.html">SwarmActivity.h</a>"</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#using &lt;mscorlib.dll&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor">#using &lt;System.dll&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>
<a name="l00014"></a>00014 <span class="keyword">using namespace </span>System;
<a name="l00015"></a>00015 <span class="keyword">using namespace </span>System::Diagnostics;
<a name="l00016"></a>00016 <span class="keyword">using namespace </span>System::IO;
<a name="l00017"></a>00017 
<a name="l00018"></a><a class="code" href="_globals_8h.html#e9bcf4711b4d1895e331975089215bcb">00018</a> <span class="keywordtype">int</span> <a class="code" href="_globals_8cpp.html#e9bcf4711b4d1895e331975089215bcb">NTEMPERATURES</a> = 20;
<a name="l00019"></a><a class="code" href="_globals_8h.html#826e7b2e55a9ca4bd8f66efab3871eb2">00019</a> <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">OpenCVExtensions::Pixel</a> <a class="code" href="_globals_8cpp.html#826e7b2e55a9ca4bd8f66efab3871eb2">HEAT_COLOR</a>[] = {
<a name="l00020"></a>00020         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,  0,255),
<a name="l00021"></a>00021         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0, 51,255),
<a name="l00022"></a>00022         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,102,255),
<a name="l00023"></a>00023         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,153,255),
<a name="l00024"></a>00024         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,204,255),
<a name="l00025"></a>00025 
<a name="l00026"></a>00026         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,255,255),
<a name="l00027"></a>00027         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,255,204),
<a name="l00028"></a>00028         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,255,153),
<a name="l00029"></a>00029         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,255,102),
<a name="l00030"></a>00030         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,255, 51),
<a name="l00031"></a>00031 
<a name="l00032"></a>00032         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(  0,255,  0),
<a name="l00033"></a>00033         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>( 51,255,  0),
<a name="l00034"></a>00034         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(102,255,  0),
<a name="l00035"></a>00035         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(153,255,  0),
<a name="l00036"></a>00036         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(204,255,  0),
<a name="l00037"></a>00037 
<a name="l00038"></a>00038         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(255,204,  0),
<a name="l00039"></a>00039         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(255,153,  0),
<a name="l00040"></a>00040         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(255,102,  0),
<a name="l00041"></a>00041         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(255, 51,  0),
<a name="l00042"></a>00042         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a>(255,  0,  0)
<a name="l00043"></a>00043 };
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="comment">// Global variables, including temporary OpenCV buffers (clean up every frame)</span>
<a name="l00046"></a><a class="code" href="_globals_8h.html#57efc8aa770b061bfa5f6ba9dc673ef3">00046</a> CvMemStorage* <a class="code" href="_globals_8cpp.html#57efc8aa770b061bfa5f6ba9dc673ef3">OpenCVmemory</a>;
<a name="l00047"></a><a class="code" href="_globals_8h.html#bceafe51b6d9c4a220970416a978dd5f">00047</a> IplImage *<a class="code" href="_globals_8cpp.html#dcc8eea4165f02dc8d32606c13087c67">imgFrame</a>, *<a class="code" href="_globals_8cpp.html#b536882a7f353e0dccff1d0ae911cc47">imgOverlayInfo</a>, *<a class="code" href="_globals_8cpp.html#c81400178452b0dd6e63cc7c21274ba4">imgPreviousFrame</a>, *<a class="code" href="_globals_8cpp.html#2c1daf0060e820291887bbfbc2f20d93">imgVideo</a>, *<a class="code" href="_globals_8cpp.html#584da8b9415f64f97217716dec8fe056">imgThermal</a>, *<a class="code" href="_globals_8cpp.html#bceafe51b6d9c4a220970416a978dd5f">sceneImg</a>, *<a class="code" href="_globals_8cpp.html#ef90b4cd081224294b7f573929d7a6ef">activityImg</a>, *<a class="code" href="_globals_8cpp.html#5a47e483b039901030ea425eedfa3863">FGMap</a>, *<a class="code" href="_globals_8cpp.html#1e3fbd95634d139089c0708491488f3f">FGMapDouble</a>, *<a class="code" href="_globals_8cpp.html#e82d22fddf80312ba208fc65d234e5e3">blobImg</a>, *<a class="code" href="_globals_8cpp.html#f85f7a91e64f4578130ccde67fe1fd44">dilated</a>, *<a class="code" href="_globals_8cpp.html#7fbed858109e22053fba921c96c58d6b">rec</a>, *<a class="code" href="_globals_8cpp.html#313c8683a26490286935dc9b2c7794e3">floorImg</a>, *<a class="code" href="_globals_8cpp.html#a751ca4ad3088ff7eb927161c0615860">motionmap</a>, *<a class="code" href="_globals_8cpp.html#9640e661dc620920b37f6ca56d2d6599">motionmapscaled</a>, *<a class="code" href="_globals_8cpp.html#d4c6f1197d7a3aa439e83a450ef6f2cf">motionmaptemp</a>;
<a name="l00048"></a><a class="code" href="_globals_8h.html#ed0a25c4726f54bf1a5e699df4711a62">00048</a> IplImage *<a class="code" href="_globals_8cpp.html#1b6c84cbc3cb7aa5cc4e6d14d843ddde">mask</a>, *<a class="code" href="_globals_8cpp.html#3b9d3337b1e65b6138ba091e21afa26c">lab</a>, *<a class="code" href="_globals_8cpp.html#ed0a25c4726f54bf1a5e699df4711a62">weight</a>, *<a class="code" href="_globals_8cpp.html#99cc519e9141cad8ba5e5e6a5bff3c4a">l_plane</a>, *<a class="code" href="_globals_8cpp.html#5d423cfb46d05cc549d416b92a431710">a_plane</a>, *<a class="code" href="_globals_8cpp.html#bf127f410199a5c8e71e4ce06e241b5e">b_plane</a>;
<a name="l00049"></a><a class="code" href="_globals_8h.html#de2979bbac1fc6254835496289660e23">00049</a> IplImage *<a class="code" href="_globals_8cpp.html#de2979bbac1fc6254835496289660e23">zbuffer</a>, *<a class="code" href="_globals_8cpp.html#b2ce9da27e1d5727e29e8ef30329a08d">body_zbuffer</a>, *<a class="code" href="_globals_8cpp.html#265f52600f6ef779ee93cbcac470a9fa">fbuffer</a>, *<a class="code" href="_globals_8cpp.html#96e982ff176958ec197a50586ee65368">fg</a>, *<a class="code" href="_globals_8cpp.html#7fa38479663d065faad9145a4017f930">bg</a>, *<a class="code" href="_globals_8cpp.html#4b2d4e55b64a28d4ac0b4e0a734d9f7a">temp</a>, *<a class="code" href="_globals_8cpp.html#5f4f09b989fa2c50769ee80e11c1f343">ifg</a>, *<a class="code" href="_globals_8cpp.html#b5812ee44d5a60a3a859201f2647d7ec">ibg</a>, *<a class="code" href="_globals_8cpp.html#e70c51ae7e2d2d20d7e29b5160f32a49">biggy</a>;
<a name="l00050"></a><a class="code" href="_globals_8h.html#b13f2b886610f4d3127d5d3903c06bd6">00050</a> IplImage *<a class="code" href="_globals_8cpp.html#b13f2b886610f4d3127d5d3903c06bd6">body_mask</a>, *<a class="code" href="_globals_8cpp.html#4e26626ca1309461c668a7b28787dc5f">blob_mask</a>;
<a name="l00051"></a><a class="code" href="_globals_8h.html#2f1f49c72d7693979d897fa41e9f2f61">00051</a> IplImage* <a class="code" href="_globals_8cpp.html#2f1f49c72d7693979d897fa41e9f2f61">floormap</a>;
<a name="l00052"></a><a class="code" href="_globals_8h.html#29ec4a325afbbe62623c810a33dbb564">00052</a> IplImage* <a class="code" href="_globals_8cpp.html#29ec4a325afbbe62623c810a33dbb564">obstacle_disp</a>;
<a name="l00053"></a><a class="code" href="_globals_8h.html#c381e6f1deda8a8ede51f717655b5366">00053</a> IplImage* <a class="code" href="_globals_8cpp.html#c381e6f1deda8a8ede51f717655b5366">body_icon</a>;
<a name="l00054"></a><a class="code" href="_globals_8h.html#8270498a05616350ed2717881b011bbd">00054</a> IplImage* <a class="code" href="_globals_8cpp.html#8270498a05616350ed2717881b011bbd">door_mask</a>;
<a name="l00055"></a><a class="code" href="_globals_8h.html#0c575e5a96aee255ada87d30446af873">00055</a> IplImage* <a class="code" href="_globals_8cpp.html#0c575e5a96aee255ada87d30446af873">distance_mask</a>;
<a name="l00056"></a><a class="code" href="_globals_8h.html#ac3c793deb9054dff831a820b070c944">00056</a> IplImage *<a class="code" href="_globals_8cpp.html#30b461669697d8dbf699f2acbb056e38">velx</a>, *<a class="code" href="_globals_8cpp.html#ac3c793deb9054dff831a820b070c944">vely</a>;
<a name="l00057"></a><a class="code" href="_globals_8h.html#a9f64915905aa5943f6805b0a290b0da">00057</a> IplImage *<a class="code" href="_globals_8cpp.html#a9f64915905aa5943f6805b0a290b0da">temp32</a>; 
<a name="l00058"></a><a class="code" href="_globals_8h.html#ff39e3308132c1b3c9548c6bbdf21b55">00058</a> CvRNG <a class="code" href="_globals_8cpp.html#ff39e3308132c1b3c9548c6bbdf21b55">rnd_seed</a>;
<a name="l00059"></a><a class="code" href="_globals_8h.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">00059</a> <a class="code" href="class_c_progress_dlg.html">CProgressDlg</a>* <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>;
<a name="l00060"></a><a class="code" href="_globals_8cpp.html#42d6a906ce66d6fb751de59ce631abb3">00060</a> clock_t <a class="code" href="_globals_8cpp.html#42d6a906ce66d6fb751de59ce631abb3">start</a>;
<a name="l00061"></a><a class="code" href="_globals_8h.html#e52d115bac8b6e7fde8f0b90f54e2caa">00061</a> CCritSec <a class="code" href="_globals_8cpp.html#a0f75ae54b393b909243994947275961">m_dataCriticalSection</a>, <a class="code" href="_globals_8cpp.html#81ab688f99ba1694b87c00b969cf7057">m_RecordCriticalSection</a>, <a class="code" href="_globals_8cpp.html#e52d115bac8b6e7fde8f0b90f54e2caa">m_thermalCriticalSection</a>;
<a name="l00062"></a><a class="code" href="_globals_8h.html#990eeff8801b044c01e083758069beca">00062</a> <span class="keywordtype">int</span>                                                             <a class="code" href="_globals_8cpp.html#990eeff8801b044c01e083758069beca">m_recordVideoView</a>, 
<a name="l00063"></a>00063                                                                 <a class="code" href="_globals_8cpp.html#f045954763fa8e81908b617a3fa461ec">m_recordSceneView</a>, 
<a name="l00064"></a>00064                                                                 <a class="code" href="_globals_8cpp.html#407224fd520503ebe109295474d2ef49">m_recordActivityView</a>, 
<a name="l00065"></a>00065                                                                 <a class="code" href="_globals_8cpp.html#60bd71feae250882125e8313308d3ac0">m_recordFloorView</a>;     
<a name="l00066"></a><a class="code" href="_globals_8h.html#bcbbcb21b6b7ab30442fb1f6e1521508">00066</a> CvVideoWriter                                   *<a class="code" href="_globals_8cpp.html#f95cf892bb79eb2031e5cba79ffec780">aviWriterInputView</a>, 
<a name="l00067"></a>00067                                                                 *<a class="code" href="_globals_8cpp.html#bcbbcb21b6b7ab30442fb1f6e1521508">aviWriterOutputView</a>, 
<a name="l00068"></a>00068                                                                 *<a class="code" href="_globals_8cpp.html#25af48ed52913ef8234be063ee9bfa3c">aviWriterActivityView</a>, 
<a name="l00069"></a>00069                                                                 *<a class="code" href="_globals_8cpp.html#4d49ecf232cc50dbf973cba352208686">aviWriterFloorView</a>;   <span class="comment">// video writers</span>
<a name="l00070"></a>00070 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00071"></a>00071 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00072"></a><a class="code" href="_globals_8h.html#ebac2e97267778257260308eed554ab2">00072</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#ebac2e97267778257260308eed554ab2">drawText</a>(CString text, CvPoint p, IplImage* frame, CvScalar t, CvScalar <a class="code" href="_globals_8cpp.html#7fa38479663d065faad9145a4017f930">bg</a>, <span class="keywordtype">float</span> size) {
<a name="l00073"></a>00073         CvFont  font;
<a name="l00074"></a>00074         cvInitFont(&amp;font, CV_FONT_HERSHEY_PLAIN, size, size);
<a name="l00075"></a>00075         CvSize sz;
<a name="l00076"></a>00076         <span class="keywordtype">int</span> baseline;
<a name="l00077"></a>00077         cvGetTextSize(text, &amp;font, &amp;sz, &amp;baseline );
<a name="l00078"></a>00078         <span class="comment">//cvRectangle(frame, cvPoint(p.x, p.y-1), cvPoint(p.x+sz.width, p.y+sz.height+1), bg, CV_FILLED, CV_AA);</span>
<a name="l00079"></a>00079         cvPutText(frame, text, <a class="code" href="_globals_8cpp.html#8dbc3855d325a7c853bb8fd1607622e4">cvPoint</a>(p.x, p.y+sz.height), &amp;font, t);
<a name="l00080"></a>00080 };
<a name="l00081"></a>00081 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00082"></a><a class="code" href="_globals_8h.html#b7b85d4f407b45c536ef0817e554eb01">00082</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#ebac2e97267778257260308eed554ab2">drawText</a>(<span class="keywordtype">double</span> i, CvPoint p, IplImage* frame, CvScalar t, CvScalar <a class="code" href="_globals_8cpp.html#7fa38479663d065faad9145a4017f930">bg</a>, <span class="keywordtype">float</span> size) {
<a name="l00083"></a>00083         CString text;
<a name="l00084"></a>00084         <span class="keywordflow">if</span> ((<span class="keywordtype">double</span>)((<span class="keywordtype">int</span>)i) == i) 
<a name="l00085"></a>00085                 text.Format(<span class="stringliteral">"%-d"</span>, (<span class="keywordtype">int</span>)i);
<a name="l00086"></a>00086         <span class="keywordflow">else</span>
<a name="l00087"></a>00087                 text.Format(<span class="stringliteral">"%-.2f"</span>, i);
<a name="l00088"></a>00088         <a class="code" href="_globals_8cpp.html#ebac2e97267778257260308eed554ab2">drawText</a>(text, p, frame, t, bg, size);
<a name="l00089"></a>00089 };
<a name="l00090"></a>00090 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00091"></a><a class="code" href="_globals_8h.html#f84e6f2fabc07131b6546d8a916646fc">00091</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#f84e6f2fabc07131b6546d8a916646fc">drawTextInRectangle</a>(CString text, CvPoint p, IplImage* frame, CvScalar t, CvScalar <a class="code" href="_globals_8cpp.html#7fa38479663d065faad9145a4017f930">bg</a>, <span class="keywordtype">float</span> size) {
<a name="l00092"></a>00092         CvFont  font;
<a name="l00093"></a>00093         cvInitFont(&amp;font, CV_FONT_HERSHEY_PLAIN, size, size);
<a name="l00094"></a>00094         CvSize sz;
<a name="l00095"></a>00095         <span class="keywordtype">int</span> baseline;
<a name="l00096"></a>00096         <span class="keyword">const</span> OFFSET = 3;
<a name="l00097"></a>00097         cvGetTextSize(text, &amp;font, &amp;sz, &amp;baseline );
<a name="l00098"></a>00098         cvRectangle(frame, <a class="code" href="_globals_8cpp.html#8dbc3855d325a7c853bb8fd1607622e4">cvPoint</a>(p.x - OFFSET, p.y - OFFSET), 
<a name="l00099"></a>00099                 <a class="code" href="_globals_8cpp.html#8dbc3855d325a7c853bb8fd1607622e4">cvPoint</a>(p.x+sz.width+OFFSET, p.y+sz.height+OFFSET), bg, CV_FILLED, CV_AA);
<a name="l00100"></a>00100         cvPutText(frame, text, <a class="code" href="_globals_8cpp.html#8dbc3855d325a7c853bb8fd1607622e4">cvPoint</a>(p.x, p.y+sz.height), &amp;font, t);
<a name="l00101"></a>00101 }
<a name="l00102"></a>00102 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00103"></a><a class="code" href="_globals_8h.html#9aa131c18aa8b6b2202c36ef241bc3e5">00103</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#f84e6f2fabc07131b6546d8a916646fc">drawTextInRectangle</a>(<span class="keywordtype">double</span> i, CvPoint p, IplImage* frame, CvScalar t, CvScalar <a class="code" href="_globals_8cpp.html#7fa38479663d065faad9145a4017f930">bg</a>, <span class="keywordtype">float</span> size) {
<a name="l00104"></a>00104         CString text;
<a name="l00105"></a>00105         <span class="keywordflow">if</span> ((<span class="keywordtype">double</span>)((<span class="keywordtype">int</span>)i) == i) 
<a name="l00106"></a>00106                 text.Format(<span class="stringliteral">"%-d"</span>, (<span class="keywordtype">int</span>)i);
<a name="l00107"></a>00107         <span class="keywordflow">else</span>
<a name="l00108"></a>00108                 text.Format(<span class="stringliteral">"%-.2f"</span>, i);
<a name="l00109"></a>00109         <a class="code" href="_globals_8cpp.html#f84e6f2fabc07131b6546d8a916646fc">drawTextInRectangle</a>(text, p, frame, t, bg, size);
<a name="l00110"></a>00110 }
<a name="l00111"></a>00111 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00112"></a><a class="code" href="_globals_8h.html#718ee0a4d800f1bf13bccbb8861116ec">00112</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#f84e6f2fabc07131b6546d8a916646fc">drawTextInRectangle</a>( <span class="keywordtype">double</span> i, CvPoint p, CDC* pDC, <span class="keywordtype">float</span> size )
<a name="l00113"></a>00113 {
<a name="l00114"></a>00114         CString text;
<a name="l00115"></a>00115         <span class="keywordflow">if</span> ((<span class="keywordtype">double</span>)((<span class="keywordtype">int</span>)i) == i) 
<a name="l00116"></a>00116                 text.Format(<span class="stringliteral">"%-d"</span>, (<span class="keywordtype">int</span>)i);
<a name="l00117"></a>00117         <span class="keywordflow">else</span>
<a name="l00118"></a>00118                 text.Format(<span class="stringliteral">"%-.2f"</span>, i);
<a name="l00119"></a>00119         <span class="keyword">const</span> <span class="keywordtype">int</span> ROUND = 5;
<a name="l00120"></a>00120         CRect rect;
<a name="l00121"></a>00121         pDC-&gt;DrawText(text, &amp;rect, DT_CALCRECT);
<a name="l00122"></a>00122         pDC-&gt;RoundRect(&amp;rect, CPoint(ROUND, ROUND));
<a name="l00123"></a>00123         pDC-&gt;DrawText(text, &amp;rect, DT_NOCLIP);
<a name="l00124"></a>00124         
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 }
<a name="l00127"></a>00127 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00128"></a><a class="code" href="_globals_8h.html#e63543b1ce660745d2ec3485fb7b1f92">00128</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#a10922bddac2d6af9862d323822aa28b">drawTextInCircle</a>(CString text, CvPoint p, IplImage* frame, CvScalar t, CvScalar <a class="code" href="_globals_8cpp.html#7fa38479663d065faad9145a4017f930">bg</a>, <span class="keywordtype">float</span> size, <span class="keywordtype">int</span> min_radius) {
<a name="l00129"></a>00129         CvFont  font;
<a name="l00130"></a>00130         cvInitFont(&amp;font, CV_FONT_HERSHEY_PLAIN, size, size);
<a name="l00131"></a>00131         CvSize sz;
<a name="l00132"></a>00132         <span class="keywordtype">int</span> baseline;
<a name="l00133"></a>00133         <span class="keywordflow">if</span> (min_radius) {
<a name="l00134"></a>00134                 sz.width = min_radius;
<a name="l00135"></a>00135                 sz.height = min_radius;
<a name="l00136"></a>00136         }
<a name="l00137"></a>00137         <span class="keywordflow">else</span>
<a name="l00138"></a>00138                 cvGetTextSize(text, &amp;font, &amp;sz, &amp;baseline );
<a name="l00139"></a>00139         cvCircle(frame, <a class="code" href="_globals_8cpp.html#8dbc3855d325a7c853bb8fd1607622e4">cvPoint</a>(p.x+sz.width/2, p.y+sz.height/2), sz.width/2+2, bg, CV_FILLED, CV_AA);
<a name="l00140"></a>00140         cvPutText(frame, text, <a class="code" href="_globals_8cpp.html#8dbc3855d325a7c853bb8fd1607622e4">cvPoint</a>(p.x, p.y+sz.height), &amp;font, t);
<a name="l00141"></a>00141 };
<a name="l00142"></a>00142 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00143"></a><a class="code" href="_globals_8h.html#64a33bb4edec73e8f86593217bbe6941">00143</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#a10922bddac2d6af9862d323822aa28b">drawTextInCircle</a>(<span class="keywordtype">double</span> i, CvPoint p, IplImage* frame, CvScalar t, CvScalar <a class="code" href="_globals_8cpp.html#7fa38479663d065faad9145a4017f930">bg</a>, <span class="keywordtype">float</span> size, <span class="keywordtype">int</span> min_radius) {
<a name="l00144"></a>00144         CString text;
<a name="l00145"></a>00145         <span class="keywordflow">if</span> ((<span class="keywordtype">double</span>)((<span class="keywordtype">int</span>)i) == i) 
<a name="l00146"></a>00146                 text.Format(<span class="stringliteral">"%-d"</span>, (<span class="keywordtype">int</span>)i);
<a name="l00147"></a>00147         <span class="keywordflow">else</span>
<a name="l00148"></a>00148                 text.Format(<span class="stringliteral">"%-.2f"</span>, i);
<a name="l00149"></a>00149         <a class="code" href="_globals_8cpp.html#a10922bddac2d6af9862d323822aa28b">drawTextInCircle</a>(text, p, frame, t, bg, size, min_radius);
<a name="l00150"></a>00150 };
<a name="l00151"></a>00151 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00152"></a><a class="code" href="_globals_8h.html#3b34d4b63b0a5c5cb7d6e351ddcee386">00152</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#3b34d4b63b0a5c5cb7d6e351ddcee386">drawEditableToolTip</a>(CWnd* pParent, CString&amp; text, CRect rect) {
<a name="l00153"></a>00153                 <a class="code" href="class_c_editable_tooltip.html">CEditableTooltip</a>* enter = <span class="keyword">new</span> <a class="code" href="class_c_editable_tooltip.html">CEditableTooltip</a>(pParent, rect, text);
<a name="l00154"></a>00154                 <span class="keywordflow">if</span> (enter-&gt;<a class="code" href="class_c_editable_tooltip.html#4f1c6c80fd680f749e33ab5741606cb8">DoModal</a>() == IDOK)
<a name="l00155"></a>00155                         enter-&gt;GetWindowText(text);
<a name="l00156"></a>00156                 enter-&gt;CloseWindow();
<a name="l00157"></a>00157                 <span class="keyword">delete</span> enter;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00160"></a><a class="code" href="_globals_8h.html#324188d711c9640821fab6ed390787f6">00160</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#324188d711c9640821fab6ed390787f6">drawStaticToolTip</a>(CDC* pDC, CString&amp; text, CRect rect) {
<a name="l00161"></a>00161                 <span class="keywordflow">if</span> (text.IsEmpty())
<a name="l00162"></a>00162                         <span class="keywordflow">return</span>;
<a name="l00163"></a>00163                 CPen pen(PS_SOLID, 1, RGB(0, 0, 0));
<a name="l00164"></a>00164                 CBrush brush(RGB(255, 255, 231));
<a name="l00165"></a>00165                 CPen* pOldPen = pDC-&gt;SelectObject(&amp;pen);
<a name="l00166"></a>00166                 CBrush* pOldBrush= pDC-&gt;SelectObject(&amp;brush);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168                 pDC-&gt;RoundRect(rect, CPoint(5, 5));
<a name="l00169"></a>00169                 <span class="keywordtype">int</span> oldBkMode = pDC-&gt;SetBkMode(TRANSPARENT);
<a name="l00170"></a>00170                 pDC-&gt;DrawText(text, &amp;rect, DT_CENTER | DT_SINGLELINE);
<a name="l00171"></a>00171                 pDC-&gt;SetBkMode(oldBkMode);
<a name="l00172"></a>00172                 pDC-&gt;SelectObject(pOldPen);
<a name="l00173"></a>00173                 pDC-&gt;SelectObject(pOldBrush);
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00176"></a><a class="code" href="_globals_8h.html#31cbd174d9aff3a44f502e5eadc9923e">00176</a> CvScalar <a class="code" href="_globals_8cpp.html#c7562bc4f686f8d2d055f5876ed7c309">colorLighter</a>(CvScalar color, <span class="keywordtype">int</span> step) {
<a name="l00177"></a>00177         <span class="keywordflow">return</span> cvScalar(min(255, color.val[0]+step), min(255, color.val[1]+step), min(255, color.val[2]+step), color.val[3]);
<a name="l00178"></a>00178 }
<a name="l00179"></a>00179 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00180"></a><a class="code" href="_globals_8h.html#033a6431e4ce1098766efb7c0bf72a75">00180</a> CvScalar <a class="code" href="_globals_8cpp.html#8f32f2f913111aa7375cdd6ab12c156c">colorDarker</a>(CvScalar color, <span class="keywordtype">int</span> step) {
<a name="l00181"></a>00181         <span class="keywordflow">return</span> cvScalar(color.val[0]-step, color.val[1]-step, color.val[2]-step, color.val[3]);
<a name="l00182"></a>00182 }
<a name="l00183"></a>00183 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00184"></a><a class="code" href="_globals_8h.html#46226882480846f26de06ca1fecf2c55">00184</a> CvScalar <a class="code" href="_globals_8cpp.html#46226882480846f26de06ca1fecf2c55">colorFromID</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {
<a name="l00185"></a>00185         srand(<span class="keywordtype">id</span>*100);
<a name="l00186"></a>00186         <span class="keywordflow">return</span> cvScalar(rand() % 256, rand() % 256, rand() % 256);
<a name="l00187"></a>00187 }
<a name="l00188"></a>00188 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00189"></a><a class="code" href="_globals_8h.html#0aa3f3170636672b50d595858aab2b20">00189</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#03e63a807d4d9576d8096f344c7a0f53">ShowProgressDialog</a>(LPCTSTR title, <span class="keywordtype">int</span> range) {
<a name="l00190"></a>00190         <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a> = <span class="keyword">new</span> <a class="code" href="class_c_progress_dlg.html">CProgressDlg</a>();
<a name="l00191"></a>00191         <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;Create(<a class="code" href="resource_8h.html#044b9a6f623731ca62e61906114c3358">IDD_PROGRESS</a>);
<a name="l00192"></a>00192         <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;SetWindowText(title);
<a name="l00193"></a>00193         <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.SetRange(0, range);
<a name="l00194"></a>00194         <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;ShowWindow(SW_SHOW);
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00197"></a><a class="code" href="_globals_8h.html#43b642ed526570b4a83c1fbc1018dd4b">00197</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#43b642ed526570b4a83c1fbc1018dd4b">SetProgressDialogRange</a>(<span class="keywordtype">int</span> <a class="code" href="_globals_8cpp.html#42d6a906ce66d6fb751de59ce631abb3">start</a>, <span class="keywordtype">int</span> stop) {
<a name="l00198"></a>00198         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>) {
<a name="l00199"></a>00199                 <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.SetRange(start, stop);
<a name="l00200"></a>00200                 <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.SetPos(start);
<a name="l00201"></a>00201         }
<a name="l00202"></a>00202 }
<a name="l00203"></a>00203 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00204"></a><a class="code" href="_globals_8h.html#d06cfb4c5ed65f7874b4de0630c94068">00204</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#d06cfb4c5ed65f7874b4de0630c94068">SetProgressDialogTitle</a>(LPCTSTR title) {
<a name="l00205"></a>00205         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>)
<a name="l00206"></a>00206                 <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;SetWindowText(title);
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00209"></a><a class="code" href="_globals_8h.html#71a48533ed5fe923852513bef067968b">00209</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#71a48533ed5fe923852513bef067968b">SetProgressDialogMessage</a>(LPCTSTR msg) {
<a name="l00210"></a>00210         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>)
<a name="l00211"></a>00211                 <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#94195460597d3f6dfab8186c0c4496ed">SetMessage</a>(msg);
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00214"></a><a class="code" href="_globals_8h.html#494bd9a404a4c34b42e9f303cd08ceb9">00214</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#b8ef1b6ac4166d2608a15b74ca98dc28">IncProgressDialogPos</a>(<span class="keywordtype">int</span> incr) {
<a name="l00215"></a>00215         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>)
<a name="l00216"></a>00216                 <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.SetPos(<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.GetPos()+incr);
<a name="l00217"></a>00217 }
<a name="l00218"></a>00218 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00219"></a><a class="code" href="_globals_8h.html#7814d935cf5dfe8683b0ebb301e653e0">00219</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#3ddd73bb5e0085e9caae76c5e8fa9db7">StepProgressDialog</a>(LPCTSTR msg, <span class="keywordtype">int</span> incr) {
<a name="l00220"></a>00220         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>) {
<a name="l00221"></a>00221                 <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.SetPos(<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.GetPos()+incr);
<a name="l00222"></a>00222                 <span class="keywordflow">if</span> (msg != <span class="stringliteral">""</span>)
<a name="l00223"></a>00223                         <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#94195460597d3f6dfab8186c0c4496ed">SetMessage</a>(msg);
<a name="l00224"></a>00224         }
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00227"></a><a class="code" href="_globals_8h.html#291f873209ebf72b6f26fe5dab1bc78c">00227</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(<span class="keywordtype">int</span> pos) {
<a name="l00228"></a>00228         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>)
<a name="l00229"></a>00229                 <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>-&gt;<a class="code" href="class_c_progress_dlg.html#3390b5bc1bc3dc1053784b6d3770cca4">m_progress</a>.SetPos(pos);
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00232"></a><a class="code" href="_globals_8h.html#58cb14ab08c0cf83f37ed2762c3bae17">00232</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#58cb14ab08c0cf83f37ed2762c3bae17">HideProgressDialog</a>() {
<a name="l00233"></a>00233         <span class="keyword">delete</span> <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a>;
<a name="l00234"></a>00234         <a class="code" href="_globals_8cpp.html#4398cdd3eadf5a9a56dfe8b8665bd8f6">progressDlg</a> = NULL;
<a name="l00235"></a>00235 }
<a name="l00236"></a>00236 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00237"></a><a class="code" href="_globals_8h.html#8dbc3855d325a7c853bb8fd1607622e4">00237</a> CvPoint <a class="code" href="_globals_8cpp.html#8dbc3855d325a7c853bb8fd1607622e4">cvPoint</a>( CPoint a )
<a name="l00238"></a>00238 {
<a name="l00239"></a>00239     CvPoint p;
<a name="l00240"></a>00240     p.x = a.x;
<a name="l00241"></a>00241     p.y = a.y;
<a name="l00242"></a>00242     <span class="keywordflow">return</span> p;
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00245"></a><a class="code" href="_globals_8h.html#5f5568f0ba9fedce2f602dfcb67cd46d">00245</a> CPoint <a class="code" href="_globals_8cpp.html#5f5568f0ba9fedce2f602dfcb67cd46d">cPoint</a>( CvPoint a )
<a name="l00246"></a>00246 {
<a name="l00247"></a>00247     CPoint p;
<a name="l00248"></a>00248     p.x = a.x;
<a name="l00249"></a>00249     p.y = a.y;
<a name="l00250"></a>00250     <span class="keywordflow">return</span> p;
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00253"></a><a class="code" href="_globals_8h.html#5a10c89ab77f8648a31f25e0877d6422">00253</a> CPoint <a class="code" href="_globals_8cpp.html#5f5568f0ba9fedce2f602dfcb67cd46d">cPoint</a>( CvPoint2D32f a )
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255     CPoint p;
<a name="l00256"></a>00256     p.x = <a class="code" href="_globals_8cpp.html#1c469f80dc66c5c924c90a1e0913af2f">round</a>(a.x);
<a name="l00257"></a>00257     p.y = <a class="code" href="_globals_8cpp.html#1c469f80dc66c5c924c90a1e0913af2f">round</a>(a.y);
<a name="l00258"></a>00258     <span class="keywordflow">return</span> p;
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00261"></a><a class="code" href="_globals_8h.html#53045a1f78663141c8ce471462b08bee">00261</a> CPoint <a class="code" href="_globals_8cpp.html#5f5568f0ba9fedce2f602dfcb67cd46d">cPoint</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y )
<a name="l00262"></a>00262 {
<a name="l00263"></a>00263     CPoint p;
<a name="l00264"></a>00264     p.x = (LONG)x;
<a name="l00265"></a>00265     p.y = (LONG)y;
<a name="l00266"></a>00266     <span class="keywordflow">return</span> p;
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00269"></a><a class="code" href="_globals_8h.html#1a9e4f0ff8116bb44834c09503846811">00269</a> CvPoint2D32f <a class="code" href="_globals_8cpp.html#1a9e4f0ff8116bb44834c09503846811">cvPoint2D32f</a>( CPoint a )
<a name="l00270"></a>00270 {
<a name="l00271"></a>00271     CvPoint2D32f p;
<a name="l00272"></a>00272     p.x = (float)a.x;
<a name="l00273"></a>00273     p.y = (<span class="keywordtype">float</span>)a.y;
<a name="l00274"></a>00274     <span class="keywordflow">return</span> p;
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00277"></a><a class="code" href="_globals_8h.html#2ea75df9f3a700de6a687036365547c5">00277</a> <span class="keywordtype">bool</span> <a class="code" href="_globals_8cpp.html#2ea75df9f3a700de6a687036365547c5">cvPointInRect</a>(CvPoint p, CvRect r) {
<a name="l00278"></a>00278         <span class="keywordflow">if</span> (p.x &gt;= r.x &amp;&amp; p.x &lt; r.x+r.width &amp;&amp; p.y &gt;= r.y &amp;&amp; p.y &lt; r.y+r.height)
<a name="l00279"></a>00279                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00280"></a>00280         <span class="keywordflow">else</span>
<a name="l00281"></a>00281                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00282"></a>00282 }
<a name="l00283"></a>00283 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00284"></a><a class="code" href="_globals_8h.html#0637d283d2fe7cf6d4d7f7b68ef6f68f">00284</a> <span class="keywordtype">bool</span> <a class="code" href="_globals_8cpp.html#0637d283d2fe7cf6d4d7f7b68ef6f68f">cvPointInPoly</a>(CvPoint2D32f p, <a class="code" href="class_c_array.html">CArray&lt;CvPoint2D32f&gt;</a> &amp;poly) {
<a name="l00285"></a>00285         <span class="keywordtype">int</span> N = poly.GetCount();
<a name="l00286"></a>00286         <span class="keywordtype">bool</span> c = <span class="keyword">false</span>;
<a name="l00287"></a>00287         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, j = N-1; i &lt; N; j = i++) {
<a name="l00288"></a>00288         <span class="keywordflow">if</span> ((((poly[i].y &lt; p.y) &amp;&amp; (p.y &lt; poly[j].y)) ||
<a name="l00289"></a>00289                  ((poly[j].y &lt; p.y) &amp;&amp; (p.y &lt; poly[i].y))) &amp;&amp;
<a name="l00290"></a>00290                 (p.x &lt; (poly[j].x - poly[i].x) * (p.y - poly[i].y) / (poly[j].y - poly[i].y) + poly[i].x))
<a name="l00291"></a>00291 
<a name="l00292"></a>00292           c = !c;
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294         <span class="keywordflow">return</span> c;
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00297"></a><a class="code" href="_globals_8h.html#1c469f80dc66c5c924c90a1e0913af2f">00297</a> <span class="keywordtype">int</span> <a class="code" href="_globals_8cpp.html#1c469f80dc66c5c924c90a1e0913af2f">round</a>(<span class="keywordtype">double</span> a) {
<a name="l00298"></a>00298         <span class="keywordflow">if</span> (a &gt; 0)
<a name="l00299"></a>00299                 <span class="keywordflow">return</span> int(a + 0.5);
<a name="l00300"></a>00300         <span class="keywordflow">else</span> 
<a name="l00301"></a>00301                 <span class="keywordflow">return</span> int(a - 0.5);
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00304"></a><a class="code" href="_globals_8h.html#b1fb4a60001f16d8281c7f6ed425b0a2">00304</a> int64 <a class="code" href="_globals_8cpp.html#b1fb4a60001f16d8281c7f6ed425b0a2">round64</a>(<span class="keywordtype">double</span> a) {
<a name="l00305"></a>00305         <span class="keywordflow">if</span> (a &gt; 0)
<a name="l00306"></a>00306                 <span class="keywordflow">return</span> int64(a + 0.5);
<a name="l00307"></a>00307         <span class="keywordflow">else</span> 
<a name="l00308"></a>00308                 <span class="keywordflow">return</span> int64(a - 0.5);
<a name="l00309"></a>00309 }
<a name="l00310"></a>00310 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00311"></a><a class="code" href="_globals_8h.html#af9ac42d14cf4ea8f2f5a1019523b97f">00311</a> <span class="keywordtype">bool</span> <a class="code" href="_globals_8cpp.html#af9ac42d14cf4ea8f2f5a1019523b97f">outOfBounds</a>(CvPoint2D32f p, IplImage* frame) {
<a name="l00312"></a>00312         <span class="keywordflow">if</span> (p.x &lt; 0 || p.x &gt; frame-&gt;width || p.y &lt; 0 || p.y &gt; frame-&gt;height)
<a name="l00313"></a>00313                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00314"></a>00314         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00315"></a>00315 }
<a name="l00316"></a>00316 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00317"></a><a class="code" href="_globals_8h.html#19b6fd5453300205993bd3fcf232f85e">00317</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(CvPoint p1, CvPoint p2) {
<a name="l00318"></a>00318         <span class="keywordflow">return</span> sqrt(<a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(p1,p2));
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00321"></a><a class="code" href="_globals_8h.html#314d8e98a566cc53d8f29216264dab4d">00321</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(CvPoint3D32f p1, CvPoint3D32f p2) {
<a name="l00322"></a>00322         <span class="keywordflow">return</span> sqrt(<a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(p1,p2));
<a name="l00323"></a>00323 }
<a name="l00324"></a>00324 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00325"></a><a class="code" href="_globals_8h.html#97fe7fd77d80c4b6d7fffae0216bd121">00325</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(CvPoint2D32f p1, CvPoint2D32f p2) {
<a name="l00326"></a>00326         <span class="keywordflow">return</span> sqrt(<a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(p1,p2));
<a name="l00327"></a>00327 }
<a name="l00328"></a>00328 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00329"></a><a class="code" href="_globals_8h.html#332eda045a4aa01c02bba0b011bdabb9">00329</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(CvPoint3D32f p1, CvPoint3D32f p2, CvPoint3D32f sigma){
<a name="l00330"></a>00330         <span class="keywordflow">return</span> sqrt(<a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(p1,p2,sigma));
<a name="l00331"></a>00331 }
<a name="l00332"></a>00332 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00333"></a><a class="code" href="_globals_8h.html#18de4c029d8ee53a950716d6adc4ad79">00333</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(CvPoint p1, CvPoint p2) {
<a name="l00334"></a>00334         <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)((p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y));
<a name="l00335"></a>00335 }
<a name="l00336"></a>00336 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00337"></a><a class="code" href="_globals_8h.html#4422cf0241cb33d898503aefdb5b800f">00337</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(CvPoint2D32f p1, CvPoint2D32f p2) {
<a name="l00338"></a>00338         <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)((p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y));
<a name="l00339"></a>00339 }
<a name="l00340"></a>00340 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00341"></a><a class="code" href="_globals_8h.html#cf99de52bed3966cbc39eaee40d36483">00341</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(CvPoint3D32f p1, CvPoint3D32f p2) {
<a name="l00342"></a>00342         <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)((p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y)+(p1.z-p2.z)*(p1.z-p2.z));
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 <span class="comment">// ----------------------------------------------------------</span>
<a name="l00345"></a><a class="code" href="_globals_8h.html#4531488576a86e9782eddd8e79630c30">00345</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(CvPoint3D32f p1, CvPoint3D32f p2, CvPoint3D32f sigma) {
<a name="l00346"></a>00346         CvPoint3D32f sigma2 = cvPoint3D32f(sigma.x*sigma.x, sigma.y*sigma.y, sigma.z*sigma.z);
<a name="l00347"></a>00347         <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)((p1.x-p2.x)*(p1.x-p2.x)/sigma2.x+(p1.y-p2.y)*(p1.y-p2.y)/sigma2.y+(p1.z-p2.z)*(p1.z-p2.z)/sigma2.z);
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00350"></a><a class="code" href="_globals_8h.html#65cf628f7f6bce645f3b5b04cf4c7c0c">00350</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#65cf628f7f6bce645f3b5b04cf4c7c0c">dotProduct</a>(CvPoint3D32f p1, CvPoint3D32f p2) {
<a name="l00351"></a>00351         <span class="keywordflow">return</span> p1.x*p2.x+p1.y*p2.y+p1.z*p2.z;
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00354"></a><a class="code" href="_globals_8h.html#6a6f0739e39893c4155d28c119a64906">00354</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#65cf628f7f6bce645f3b5b04cf4c7c0c">dotProduct</a>(CvPoint2D32f p1, CvPoint2D32f p2) {
<a name="l00355"></a>00355         <span class="keywordflow">return</span> p1.x*p2.x+p1.y*p2.y;
<a name="l00356"></a>00356 }
<a name="l00357"></a>00357 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00358"></a><a class="code" href="_globals_8h.html#b32ae4bc9fab4926cf54092ea5cbbfa7">00358</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#b32ae4bc9fab4926cf54092ea5cbbfa7">d_angle</a>(<span class="keywordtype">double</span> a1, <span class="keywordtype">double</span> a2) {
<a name="l00359"></a>00359         <span class="comment">// a1 and a2 are between 0 and 2PI</span>
<a name="l00360"></a>00360         a1 = fmod(a1, 2*<a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l00361"></a>00361         a2 = fmod(a2, 2*<a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363         <span class="keywordflow">if</span> (a1 - a2 &gt; <a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>)
<a name="l00364"></a>00364                 <span class="keywordflow">return</span> abs(a2-a1-2*<a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l00365"></a>00365         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a2 - a1 &gt; <a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>)
<a name="l00366"></a>00366                 <span class="keywordflow">return</span> abs(a1-a2-2*<a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l00367"></a>00367         <span class="keywordflow">else</span>
<a name="l00368"></a>00368                 <span class="keywordflow">return</span> abs(a2-a1);
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00371"></a><a class="code" href="_globals_8h.html#ae32a1500319b23d5b65632106cfe9a2">00371</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#ae32a1500319b23d5b65632106cfe9a2">angle</a>(CvPoint2D32f p1, CvPoint2D32f p2) {
<a name="l00372"></a>00372         <span class="keywordflow">return</span> atan2(p2.y-p1.y, p2.x-p1.x);
<a name="l00373"></a>00373 }
<a name="l00374"></a>00374 <span class="comment">// ----------------------------------------------------------</span>
<a name="l00375"></a><a class="code" href="_globals_8h.html#b724d6feae6649021bcf78a12f877673">00375</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#b724d6feae6649021bcf78a12f877673">d_contour2contour</a>(CvSeq* c1, CvSeq* c2) {
<a name="l00376"></a>00376         <span class="keywordflow">if</span>(!CV_IS_SEQ_POLYLINE( c1 ) || !CV_IS_SEQ_POLYLINE( c2 ))
<a name="l00377"></a>00377                 <span class="keywordflow">return</span> -1;
<a name="l00378"></a>00378         <span class="keywordtype">int</span> count1 = c1-&gt;total;
<a name="l00379"></a>00379         <span class="keywordtype">int</span> count2 = c2-&gt;total;
<a name="l00380"></a>00380         CvSeqReader reader1;
<a name="l00381"></a>00381         CvSeqReader reader2;
<a name="l00382"></a>00382         cvStartReadSeq(c1, &amp;reader1, 0);
<a name="l00383"></a>00383         cvStartReadSeq(c2, &amp;reader2, 0);
<a name="l00384"></a>00384         CvPoint pt1, pt2;
<a name="l00385"></a>00385         CV_READ_SEQ_ELEM( pt1, reader1 );
<a name="l00386"></a>00386         <span class="keywordtype">double</span> minDist = HUGE_VAL;
<a name="l00387"></a>00387         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i1 = 0; i1 &lt; count1; i1++ ) {
<a name="l00388"></a>00388                 CV_READ_SEQ_ELEM( pt1, reader1 );
<a name="l00389"></a>00389                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i2 = 0; i2 &lt; count2; i2++ )
<a name="l00390"></a>00390                         CV_READ_SEQ_ELEM( pt2, reader2 );
<a name="l00391"></a>00391                 <span class="keywordtype">double</span> dist = <a class="code" href="_globals_8cpp.html#0be66d238fc31e85752999919ca8c32d">d_2</a>(pt1, pt2);
<a name="l00392"></a>00392                 <span class="keywordflow">if</span> (dist &lt; minDist)
<a name="l00393"></a>00393                         minDist = dist;
<a name="l00394"></a>00394         }
<a name="l00395"></a>00395         <span class="keywordflow">return</span> sqrt(minDist);
<a name="l00396"></a>00396 }
<a name="l00397"></a>00397 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00398"></a><a class="code" href="_globals_8h.html#15ab42ecf630b0a84678a771cc1ee8f7">00398</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#15ab42ecf630b0a84678a771cc1ee8f7">d2line</a>(CvPoint2D32f p, CvPoint2D32f p1, CvPoint2D32f p2) {
<a name="l00399"></a>00399         <span class="keywordtype">double</span> denom = sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));
<a name="l00400"></a>00400         <span class="keywordflow">if</span> (denom == 0)
<a name="l00401"></a>00401                 <span class="keywordflow">return</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(p, p1);
<a name="l00402"></a>00402         <span class="keywordflow">return</span> abs((p2.x-p1.x)*(p1.y-p.y) - (p1.x-p.x)*(p2.y-p1.y))/denom;
<a name="l00403"></a>00403 }
<a name="l00404"></a>00404 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00405"></a><a class="code" href="_globals_8h.html#1c0750f9ccf92a93f5e72f0dd6637329">00405</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#1c0750f9ccf92a93f5e72f0dd6637329">d2lineSegment</a>(CvPoint2D32f p, CvPoint2D32f p1, CvPoint2D32f p2) {
<a name="l00406"></a>00406         <span class="keywordtype">double</span> denom = (p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y);
<a name="l00407"></a>00407         <span class="keywordflow">if</span> (denom == 0)
<a name="l00408"></a>00408                 <span class="keywordflow">return</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(p, p1);
<a name="l00409"></a>00409         <span class="keywordtype">double</span> u = ((p.x-p1.x)*(p2.x-p1.x) + (p.y-p1.y)*(p2.y-p1.y))/denom;
<a name="l00410"></a>00410         <span class="keywordflow">if</span> (u &lt; 0) 
<a name="l00411"></a>00411                 <span class="keywordflow">return</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(p,p1);
<a name="l00412"></a>00412         <span class="keywordflow">if</span> (u &gt; 1)
<a name="l00413"></a>00413                 <span class="keywordflow">return</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(p,p2);
<a name="l00414"></a>00414 
<a name="l00415"></a>00415         <span class="comment">// projection of p onto line [p1 p2]</span>
<a name="l00416"></a>00416         CvPoint2D32f pProj = <a class="code" href="_globals_8cpp.html#1a9e4f0ff8116bb44834c09503846811">cvPoint2D32f</a>(p1.x+u*(p2.x-p1.x), p1.y+u*(p2.y-p1.y));
<a name="l00417"></a>00417         <span class="keywordflow">return</span> <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(p, pProj);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419 }
<a name="l00420"></a>00420 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00421"></a><a class="code" href="_globals_8h.html#91834465c19c6afc9eba05b2c3442f45">00421</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#d590dd46d54c8d2184e698b2050443ae">pointAtD2line</a>(<span class="keywordtype">double</span> delta, CvPoint2D32f p1, CvPoint2D32f p2, CvPoint2D32f &amp;b1, CvPoint2D32f &amp;b2) {
<a name="l00422"></a>00422         <span class="comment">// Find two points b1, b2 at distance delta from p1 (p1,p2 is a line)</span>
<a name="l00423"></a>00423         <span class="keywordtype">double</span> k = (p2.y-p1.y)/(p2.x-p1.x);
<a name="l00424"></a>00424         <span class="keywordtype">double</span> l = <a class="code" href="_globals_8cpp.html#bf519ca750c62a1ae41705179bf5ea92">d</a>(p2, p1);
<a name="l00425"></a>00425         <span class="comment">// find x' = x3 - x1</span>
<a name="l00426"></a>00426         b1.x = p1.x + delta*(p2.y-p1.y)/l;
<a name="l00427"></a>00427         b1.y = p1.y - delta*(p2.x-p1.x)/l;
<a name="l00428"></a>00428         
<a name="l00429"></a>00429         b2.x = p1.x - delta*(p2.y-p1.y)/l;
<a name="l00430"></a>00430         b2.y = p1.y + delta*(p2.x-p1.x)/l;
<a name="l00431"></a>00431 }
<a name="l00432"></a>00432 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00433"></a><a class="code" href="_globals_8h.html#86e5d2a7c310dd5b7a8f388459cfd655">00433</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#86e5d2a7c310dd5b7a8f388459cfd655">probNormal</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> mean, <span class="keywordtype">double</span> std) {
<a name="l00434"></a>00434         <span class="keywordflow">return</span> 1.0/(std*sqrt(2*<a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>))*exp(-(x-mean)*(x-mean)/(2*std*std));
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00437"></a><a class="code" href="_globals_8h.html#5acd70952f66dcca8c6911300993b8b7">00437</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#5acd70952f66dcca8c6911300993b8b7">probNormalTruncated</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> mean, <span class="keywordtype">double</span> std, <span class="keywordtype">double</span> lo, <span class="keywordtype">double</span> hi, <span class="keywordtype">double</span> scale) {
<a name="l00438"></a>00438         <span class="keywordflow">if</span> (x &lt; lo || x &gt; hi )
<a name="l00439"></a>00439                 <span class="keywordflow">return</span> 0;
<a name="l00440"></a>00440         <span class="keywordflow">return</span> exp(-scale*(x-mean)*(x-mean)/(std*std));
<a name="l00441"></a>00441 }
<a name="l00442"></a>00442 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00443"></a><a class="code" href="_globals_8h.html#5b0996d58889c10b20c0567d64fec705">00443</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#5b0996d58889c10b20c0567d64fec705">deg2rad</a>(<span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#ae32a1500319b23d5b65632106cfe9a2">angle</a>) {
<a name="l00444"></a>00444         <span class="keywordflow">return</span> angle*<a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>/180;
<a name="l00445"></a>00445 }
<a name="l00446"></a>00446 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00447"></a><a class="code" href="_globals_8h.html#958cf658765166a9e1b9ebcfe7b8369c">00447</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#958cf658765166a9e1b9ebcfe7b8369c">rad2deg</a>(<span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#ae32a1500319b23d5b65632106cfe9a2">angle</a>) {
<a name="l00448"></a>00448         <span class="keywordflow">return</span> angle*180/<a class="code" href="_globals_8h.html#598a3330b3c21701223ee0ca14316eca">PI</a>;
<a name="l00449"></a>00449 }
<a name="l00450"></a>00450 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00451"></a><a class="code" href="_globals_8h.html#9570fd9abb4d9cdd2a10e8dd2e44881d">00451</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#9570fd9abb4d9cdd2a10e8dd2e44881d">meters2feet</a>(<span class="keywordtype">double</span> meters) {
<a name="l00452"></a>00452         <span class="keywordflow">return</span> meters*<a class="code" href="_globals_8h.html#e07600eb421474cb4cbd806615c98477">FEET_IN_METER</a>;
<a name="l00453"></a>00453 }
<a name="l00454"></a>00454 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00455"></a><a class="code" href="_globals_8h.html#5da97a0b78c3fc047c1543730f991077">00455</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#5da97a0b78c3fc047c1543730f991077">metersSQ2feetSQ</a>(<span class="keywordtype">double</span> smeters) {
<a name="l00456"></a>00456         <span class="keywordflow">return</span> smeters*<a class="code" href="_globals_8h.html#c0c4ae29c88dcf7421a33131102ff2cd">SQFEET_IN_SQMETER</a>;
<a name="l00457"></a>00457 }
<a name="l00458"></a>00458 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00459"></a><a class="code" href="_globals_8h.html#5536923a606fb457a87150a9e613cc09">00459</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#5536923a606fb457a87150a9e613cc09">log2</a>(<span class="keywordtype">double</span> a) {
<a name="l00460"></a>00460         <span class="keywordflow">return</span> log10(a)*log10((<span class="keywordtype">double</span>)
<a name="l00461"></a>00461                 2);
<a name="l00462"></a>00462 }
<a name="l00463"></a>00463 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00464"></a><a class="code" href="_globals_8h.html#61e5145bbc7aa0f76c074b4e9e91e06b">00464</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#61e5145bbc7aa0f76c074b4e9e91e06b">sign</a>(<span class="keywordtype">double</span> a) {
<a name="l00465"></a>00465         <span class="keywordflow">if</span> (a&gt;0)
<a name="l00466"></a>00466                 <span class="keywordflow">return</span> 1;
<a name="l00467"></a>00467         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a==0)
<a name="l00468"></a>00468                 <span class="keywordflow">return</span> 0;
<a name="l00469"></a>00469         <span class="keywordflow">else</span> 
<a name="l00470"></a>00470                 <span class="keywordflow">return</span> -1;
<a name="l00471"></a>00471 }
<a name="l00472"></a>00472 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00473"></a>00473 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; 
<a name="l00474"></a><a class="code" href="_globals_8cpp.html#8c6a16881d4ab28d222f7ac896ced037">00474</a> <span class="keywordtype">void</span> <a class="code" href="_clustering_machine_8cpp.html#8c6a16881d4ab28d222f7ac896ced037">swap</a>(T &amp;a, T&amp; b) {
<a name="l00475"></a>00475         T t = a;
<a name="l00476"></a>00476         a = b;
<a name="l00477"></a>00477         b = t;
<a name="l00478"></a>00478 }
<a name="l00479"></a>00479 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00480"></a><a class="code" href="_globals_8h.html#c87da1a468b12664b9807abc5e852028">00480</a> <span class="keywordtype">double</span> <a class="code" href="_globals_8cpp.html#c152742869356324ace5bc33d4d0d504">sigmoid</a>(<span class="keywordtype">double</span> t, <span class="keywordtype">double</span> shift, <span class="keywordtype">double</span> scale) {
<a name="l00481"></a>00481         <span class="keywordflow">return</span> 1 / (1+exp(-(t-shift)/scale));
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00484"></a><a class="code" href="_globals_8h.html#f0b2e2b3214ae127a5940c9ec610fbba">00484</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#f0b2e2b3214ae127a5940c9ec610fbba">RGB2Lab</a>(<span class="keywordtype">double</span> R, <span class="keywordtype">double</span> G, <span class="keywordtype">double</span> B, <span class="keywordtype">double</span>* LAB) {
<a name="l00485"></a>00485         IplImage* src = cvCreateImage(cvSize(1,1), IPL_DEPTH_8U, 3);
<a name="l00486"></a>00486         IplImage* <a class="code" href="_globals_8cpp.html#3b9d3337b1e65b6138ba091e21afa26c">lab</a> = cvCreateImage(cvSize(1,1), IPL_DEPTH_8U, 3);
<a name="l00487"></a>00487         <a class="code" href="class_open_c_v_extensions_1_1_pixel.html">Pixel</a> p((<span class="keywordtype">int</span>)R, (<span class="keywordtype">int</span>)G, (<span class="keywordtype">int</span>)B);
<a name="l00488"></a>00488         Image::setPixel(src, &amp;p, 0, 0);
<a name="l00489"></a>00489         cvCvtColor(src, lab, CV_BGR2Lab);
<a name="l00490"></a>00490         Image::getPixel(lab, &amp;p, 0, 0);
<a name="l00491"></a>00491         cvReleaseImage(&amp;src);
<a name="l00492"></a>00492         cvReleaseImage(&amp;lab);
<a name="l00493"></a>00493         LAB[0] = p.<a class="code" href="class_open_c_v_extensions_1_1_pixel.html#1a2b33bd77cb3935670ba70f81755e8c">B</a>;
<a name="l00494"></a>00494         LAB[1] = p.<a class="code" href="class_open_c_v_extensions_1_1_pixel.html#d259cc19f1fccb053673f58452d01249">G</a>;
<a name="l00495"></a>00495         LAB[2] = p.<a class="code" href="class_open_c_v_extensions_1_1_pixel.html#b268d1b87ef1f7f6d534c8c4de6aa163">R</a>;
<a name="l00496"></a>00496 <span class="comment">/*</span>
<a name="l00497"></a>00497 <span class="comment">        // rgb to xyz</span>
<a name="l00498"></a>00498 <span class="comment">        double x = 0.433910*r/255 + 0.376220*g/255 + 0.189860*b/255;</span>
<a name="l00499"></a>00499 <span class="comment">        double y = 0.212649*r/255 + 0.715169*g/255 + 0.072182*b/255;   </span>
<a name="l00500"></a>00500 <span class="comment">        double z = 0.017756*r/255 + 0.109478*g/255 + 0.872915*b/255;</span>
<a name="l00501"></a>00501 <span class="comment">        if (y&gt;0.008856)</span>
<a name="l00502"></a>00502 <span class="comment">                lab[0] = 116*pow(y, 1./3);</span>
<a name="l00503"></a>00503 <span class="comment">        else</span>
<a name="l00504"></a>00504 <span class="comment">                lab[0] = 903.3*y;</span>
<a name="l00505"></a>00505 <span class="comment"></span>
<a name="l00506"></a>00506 <span class="comment">        class f_</span>
<a name="l00507"></a>00507 <span class="comment">    {</span>
<a name="l00508"></a>00508 <span class="comment">    public:</span>
<a name="l00509"></a>00509 <span class="comment">      double operator()( double t )</span>
<a name="l00510"></a>00510 <span class="comment">      {</span>
<a name="l00511"></a>00511 <span class="comment">                  if (t &gt;0.008856)</span>
<a name="l00512"></a>00512 <span class="comment">                        return pow(t, 1./3);</span>
<a name="l00513"></a>00513 <span class="comment">                  else </span>
<a name="l00514"></a>00514 <span class="comment">                        return 7.787*t+16./116;</span>
<a name="l00515"></a>00515 <span class="comment">      }</span>
<a name="l00516"></a>00516 <span class="comment">    } f;</span>
<a name="l00517"></a>00517 <span class="comment"></span>
<a name="l00518"></a>00518 <span class="comment">        lab[1] = 500*(f(x)-f(y));</span>
<a name="l00519"></a>00519 <span class="comment">        lab[2] = 200*(f(y)-f(z));</span>
<a name="l00520"></a>00520 <span class="comment">*/</span>
<a name="l00521"></a>00521 }
<a name="l00522"></a>00522 
<a name="l00523"></a>00523 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00524"></a><a class="code" href="_globals_8h.html#2e01c28785a8cb84b9e820ddb99f8306">00524</a> <span class="keywordtype">void</span> <a class="code" href="_globals_8cpp.html#2e01c28785a8cb84b9e820ddb99f8306">CreateVideoWriters</a>(CString fileName, <span class="keywordtype">double</span> frameRate) {
<a name="l00525"></a>00525         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#990eeff8801b044c01e083758069beca">m_recordVideoView</a>) {
<a name="l00526"></a>00526                 <a class="code" href="_globals_8cpp.html#f95cf892bb79eb2031e5cba79ffec780">aviWriterInputView</a> = cvCreateVideoWriter(
<a name="l00527"></a>00527                                                 (LPCTSTR)(fileName+<span class="stringliteral">"_VIDEO.avi"</span>), 
<a name="l00528"></a>00528                                                 -1, 
<a name="l00529"></a>00529                                                 frameRate,
<a name="l00530"></a>00530                                                 cvSize(<a class="code" href="_globals_8cpp.html#dcc8eea4165f02dc8d32606c13087c67">imgFrame</a>-&gt;width, <a class="code" href="_globals_8cpp.html#dcc8eea4165f02dc8d32606c13087c67">imgFrame</a>-&gt;height) );
<a name="l00531"></a>00531         }
<a name="l00532"></a>00532         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#f045954763fa8e81908b617a3fa461ec">m_recordSceneView</a>) {
<a name="l00533"></a>00533                 <a class="code" href="_globals_8cpp.html#bcbbcb21b6b7ab30442fb1f6e1521508">aviWriterOutputView</a> = cvCreateVideoWriter(
<a name="l00534"></a>00534                                                 (LPCTSTR)(fileName+<span class="stringliteral">"_SCENE.avi"</span>), 
<a name="l00535"></a>00535                                                 -1, 
<a name="l00536"></a>00536                                                 frameRate,
<a name="l00537"></a>00537                                                 cvSize(<a class="code" href="_globals_8cpp.html#dcc8eea4165f02dc8d32606c13087c67">imgFrame</a>-&gt;width, <a class="code" href="_globals_8cpp.html#dcc8eea4165f02dc8d32606c13087c67">imgFrame</a>-&gt;height) );
<a name="l00538"></a>00538         }
<a name="l00539"></a>00539         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#407224fd520503ebe109295474d2ef49">m_recordActivityView</a>) {
<a name="l00540"></a>00540                 <a class="code" href="_globals_8cpp.html#25af48ed52913ef8234be063ee9bfa3c">aviWriterActivityView</a> = cvCreateVideoWriter(
<a name="l00541"></a>00541                                                 (LPCTSTR)(fileName+<span class="stringliteral">"_ACTIVITY.avi"</span>), 
<a name="l00542"></a>00542                                                 -1, 
<a name="l00543"></a>00543                                                 frameRate,
<a name="l00544"></a>00544                                                 cvSize(<a class="code" href="_globals_8cpp.html#dcc8eea4165f02dc8d32606c13087c67">imgFrame</a>-&gt;width, <a class="code" href="_globals_8cpp.html#dcc8eea4165f02dc8d32606c13087c67">imgFrame</a>-&gt;height) );
<a name="l00545"></a>00545         }
<a name="l00546"></a>00546         <span class="keywordflow">if</span> (<a class="code" href="_globals_8cpp.html#60bd71feae250882125e8313308d3ac0">m_recordFloorView</a>) {
<a name="l00547"></a>00547                 <a class="code" href="_globals_8cpp.html#4d49ecf232cc50dbf973cba352208686">aviWriterFloorView</a> = cvCreateVideoWriter(
<a name="l00548"></a>00548                                                 (LPCTSTR)(fileName+<span class="stringliteral">"_FLOOR.avi"</span>), 
<a name="l00549"></a>00549                                                 -1, 
<a name="l00550"></a>00550                                                 frameRate,
<a name="l00551"></a>00551                                                 cvSize(<a class="code" href="_globals_8cpp.html#313c8683a26490286935dc9b2c7794e3">floorImg</a>-&gt;width, <a class="code" href="_globals_8cpp.html#313c8683a26490286935dc9b2c7794e3">floorImg</a>-&gt;height) );
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553 }
<a name="l00554"></a>00554 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00555"></a>00555 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_floor_region_8h.html#952b1c7468dca682d8046c09139ad507">SerializeElements &lt;FloorRegion*&gt;</a> ( CArchive&amp; ar, <a class="code" href="class_floor_region.html">FloorRegion</a>** p, INT_PTR nCount )
<a name="l00556"></a>00556 {
<a name="l00557"></a>00557     <span class="keywordtype">int</span> i; 
<a name="l00558"></a>00558     <span class="keywordflow">if</span> (ar.IsStoring()) 
<a name="l00559"></a>00559                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) {
<a name="l00560"></a>00560                         p[i]-&gt;Serialize(ar); 
<a name="l00561"></a>00561                 }
<a name="l00562"></a>00562     <span class="keywordflow">else</span> 
<a name="l00563"></a>00563                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) { 
<a name="l00564"></a>00564                         p[i] = <span class="keyword">new</span> <a class="code" href="class_floor_region.html">FloorRegion</a>();
<a name="l00565"></a>00565             p[i]-&gt;Serialize(ar); 
<a name="l00566"></a>00566                 }
<a name="l00567"></a>00567 }
<a name="l00568"></a>00568 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00569"></a>00569 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_body_activity_model_8h.html#da653e4b72e9da8d42d8ff1758f423bd">SerializeElements &lt;BodyPath*&gt;</a> ( CArchive&amp; ar, <a class="code" href="class_body_path.html">BodyPath</a>** p, INT_PTR nCount )
<a name="l00570"></a>00570 {
<a name="l00571"></a>00571     <span class="keywordtype">int</span> i; 
<a name="l00572"></a>00572         <a class="code" href="_globals_8cpp.html#43b642ed526570b4a83c1fbc1018dd4b">SetProgressDialogRange</a>(0, nCount);
<a name="l00573"></a>00573     <span class="keywordflow">if</span> (ar.IsStoring()) 
<a name="l00574"></a>00574                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) {
<a name="l00575"></a>00575                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00576"></a>00576                         p[i]-&gt;Serialize(ar); 
<a name="l00577"></a>00577                 }
<a name="l00578"></a>00578     <span class="keywordflow">else</span> 
<a name="l00579"></a>00579                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) { 
<a name="l00580"></a>00580                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00581"></a>00581                         p[i] = <span class="keyword">new</span> <a class="code" href="class_body_path.html">BodyPath</a>();
<a name="l00582"></a>00582             p[i]-&gt;Serialize(ar); 
<a name="l00583"></a>00583                 }
<a name="l00584"></a>00584 }
<a name="l00585"></a>00585 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00586"></a>00586 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_body_activity_model_8h.html#2917e460b65430562331647f8695b141">SerializeElements &lt;Step&gt;</a> ( CArchive&amp; ar, <a class="code" href="class_step.html">Step</a>* p, INT_PTR nCount ) {
<a name="l00587"></a>00587         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nCount; i++)
<a name="l00588"></a>00588                         p[i].Serialize(ar); 
<a name="l00589"></a>00589 }
<a name="l00590"></a>00590 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00591"></a>00591 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_body_activity_model_8h.html#dd8e7baee0706d24728cd6d6f71865f5">SerializeElements &lt;CvPoint2D32f&gt;</a> ( CArchive&amp; ar, CvPoint2D32f* p, INT_PTR nCount )
<a name="l00592"></a>00592 {
<a name="l00593"></a>00593         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; nCount; i++, p++ ) {
<a name="l00594"></a>00594                 <span class="keywordflow">if</span>( ar.IsStoring())
<a name="l00595"></a>00595                         ar &lt;&lt; p-&gt;x &lt;&lt; p-&gt;y;
<a name="l00596"></a>00596                 <span class="keywordflow">else</span>
<a name="l00597"></a>00597                         ar &gt;&gt; p-&gt;x &gt;&gt; p-&gt;y;
<a name="l00598"></a>00598         }
<a name="l00599"></a>00599 }
<a name="l00600"></a>00600 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00601"></a>00601 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_floor_model_8h.html#067fc61a2f62ed7156b48386194eb602">SerializeElements &lt;CvPoint&gt;</a> ( CArchive&amp; ar, CvPoint* p, INT_PTR nCount )
<a name="l00602"></a>00602 {
<a name="l00603"></a>00603         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; nCount; i++, p++ ) {
<a name="l00604"></a>00604                 <span class="keywordflow">if</span>( ar.IsStoring())
<a name="l00605"></a>00605                         ar &lt;&lt; p-&gt;x &lt;&lt; p-&gt;y;
<a name="l00606"></a>00606                 <span class="keywordflow">else</span>
<a name="l00607"></a>00607                         ar &gt;&gt; p-&gt;x &gt;&gt; p-&gt;y;
<a name="l00608"></a>00608         }
<a name="l00609"></a>00609 }
<a name="l00610"></a>00610 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00611"></a>00611 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_globals_8cpp.html#2fe258666373be6e173f73cac31769fa">SerializeElements &lt;CLine&gt;</a> ( CArchive&amp; ar, <a class="code" href="class_c_line.html">CLine</a>* l, INT_PTR nCount )
<a name="l00612"></a>00612 {
<a name="l00613"></a>00613         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; nCount; i++, l++ ) {
<a name="l00614"></a>00614                 <span class="keywordflow">if</span>( ar.IsStoring())
<a name="l00615"></a>00615                         ar &lt;&lt; l-&gt;p1.x &lt;&lt; l-&gt;p1.y &lt;&lt; l-&gt;p2.x &lt;&lt; l-&gt;p2.y;
<a name="l00616"></a>00616                 <span class="keywordflow">else</span>
<a name="l00617"></a>00617                         ar &gt;&gt; l-&gt;p1.x &gt;&gt; l-&gt;p1.y &gt;&gt; l-&gt;p2.x &gt;&gt; l-&gt;p2.y;
<a name="l00618"></a>00618         }
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00621"></a>00621 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_globals_8cpp.html#b927928374bb66ef31d4d4bee084cad7">SerializeElements &lt;SwarmEvent*&gt;</a> ( CArchive&amp; ar, <a class="code" href="class_swarm_event.html">SwarmEvent</a>** p, INT_PTR nCount )
<a name="l00622"></a>00622 {
<a name="l00623"></a>00623     <span class="keywordtype">int</span> i; 
<a name="l00624"></a>00624         <a class="code" href="_globals_8cpp.html#43b642ed526570b4a83c1fbc1018dd4b">SetProgressDialogRange</a>(0, nCount);
<a name="l00625"></a>00625     <span class="keywordflow">if</span> (ar.IsStoring()) 
<a name="l00626"></a>00626                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) {
<a name="l00627"></a>00627                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00628"></a>00628                         p[i]-&gt;Serialize(ar); 
<a name="l00629"></a>00629                 }
<a name="l00630"></a>00630     <span class="keywordflow">else</span> 
<a name="l00631"></a>00631                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) { 
<a name="l00632"></a>00632                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00633"></a>00633                         p[i] = <span class="keyword">new</span> <a class="code" href="class_swarm_event.html">SwarmEvent</a>();
<a name="l00634"></a>00634             p[i]-&gt;Serialize(ar); 
<a name="l00635"></a>00635                         <span class="keywordflow">if</span> (p[i]-&gt;<span class="keywordtype">id</span> &gt; <a class="code" href="class_swarm_event.html#ea3fc4e5438337d00ac5ca2878ed04e2">SwarmEvent::last_id</a>)
<a name="l00636"></a>00636                                 <a class="code" href="class_swarm_event.html#ea3fc4e5438337d00ac5ca2878ed04e2">SwarmEvent::last_id</a> = p[i]-&gt;id;
<a name="l00637"></a>00637                 }
<a name="l00638"></a>00638 }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00641"></a>00641 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_globals_8cpp.html#d9825b3d433e8dfbcfaf971d119c9168">SerializeElements &lt;SwarmActivity*&gt;</a> ( CArchive&amp; ar, <a class="code" href="class_swarm_activity.html">SwarmActivity</a>** p, INT_PTR nCount )
<a name="l00642"></a>00642 {
<a name="l00643"></a>00643     <span class="keywordtype">int</span> i; 
<a name="l00644"></a>00644         <a class="code" href="_globals_8cpp.html#43b642ed526570b4a83c1fbc1018dd4b">SetProgressDialogRange</a>(0, nCount);
<a name="l00645"></a>00645     <span class="keywordflow">if</span> (ar.IsStoring()) 
<a name="l00646"></a>00646                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) {
<a name="l00647"></a>00647                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00648"></a>00648                         p[i]-&gt;Serialize(ar); 
<a name="l00649"></a>00649                 }
<a name="l00650"></a>00650     <span class="keywordflow">else</span> 
<a name="l00651"></a>00651                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) { 
<a name="l00652"></a>00652                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00653"></a>00653                         p[i] = <span class="keyword">new</span> <a class="code" href="class_swarm_activity.html">SwarmActivity</a>();
<a name="l00654"></a>00654             p[i]-&gt;Serialize(ar); 
<a name="l00655"></a>00655                         <span class="keywordflow">if</span> (p[i]-&gt;<span class="keywordtype">id</span> &gt; <a class="code" href="class_swarm_activity.html#209e82af5b73b8b0af1cc7dcf4205c97">SwarmActivity::last_id</a>)
<a name="l00656"></a>00656                                 <a class="code" href="class_swarm_activity.html#209e82af5b73b8b0af1cc7dcf4205c97">SwarmActivity::last_id</a> = p[i]-&gt;id;
<a name="l00657"></a>00657                 }
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 <span class="comment">// --------------------------------------------------------------------------</span>
<a name="l00660"></a>00660 <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> AFXAPI <a class="code" href="_globals_8cpp.html#2e058ce9702e01721211af64693021e8">SerializeElements &lt;Record*&gt;</a> ( CArchive&amp; ar, <a class="code" href="struct_record.html">Record</a>** p, INT_PTR nCount )
<a name="l00661"></a>00661 {
<a name="l00662"></a>00662         <span class="keywordtype">int</span> i; 
<a name="l00663"></a>00663         <a class="code" href="_globals_8cpp.html#43b642ed526570b4a83c1fbc1018dd4b">SetProgressDialogRange</a>(0, nCount);
<a name="l00664"></a>00664         <span class="keywordflow">if</span> (ar.IsStoring()) 
<a name="l00665"></a>00665                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) {
<a name="l00666"></a>00666                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00667"></a>00667                         p[i]-&gt;Serialize(ar); 
<a name="l00668"></a>00668                 }
<a name="l00669"></a>00669         <span class="keywordflow">else</span> 
<a name="l00670"></a>00670                 <span class="keywordflow">for</span> (i=0; i&lt;nCount; i++) { 
<a name="l00671"></a>00671                         <a class="code" href="_globals_8cpp.html#291f873209ebf72b6f26fe5dab1bc78c">SetProgressDialogPos</a>(i);
<a name="l00672"></a>00672                         p[i] = <span class="keyword">new</span> <a class="code" href="struct_record.html">Record</a>();
<a name="l00673"></a>00673                         p[i]-&gt;Serialize(ar); 
<a name="l00674"></a>00674                 }
<a name="l00675"></a>00675 }
<a name="l00676"></a>00676 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00677"></a>00677 <span class="keyword">template</span>&lt;&gt; 
<a name="l00678"></a>00678 UINT AFXAPI <a class="code" href="_clustering_machine_8h.html#d99a6b450abb4aa9e218c52cffe879a4">HashKey&lt;IntPair&amp;&gt;</a> (<a class="code" href="struct_int_pair.html">IntPair</a>&amp; key)
<a name="l00679"></a>00679 {
<a name="l00680"></a>00680         <span class="keywordflow">return</span>( UINT( key.id1 ) ^ UINT( key.id2 ) );
<a name="l00681"></a>00681 }
<a name="l00682"></a>00682 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00683"></a>00683 <span class="keyword">template</span>&lt;&gt;
<a name="l00684"></a>00684 BOOL AFXAPI <a class="code" href="_clustering_machine_8h.html#6b424a8abcc20efa17692feebc9004b3">CompareElements&lt;IntPair , IntPair&gt;</a> (<span class="keyword">const</span> <a class="code" href="struct_int_pair.html">IntPair</a>* p1, <span class="keyword">const</span> <a class="code" href="struct_int_pair.html">IntPair</a>* p2)
<a name="l00685"></a>00685 {
<a name="l00686"></a>00686         <span class="keywordflow">if</span> ( p1-&gt;id1 == p2-&gt;id1 &amp;&amp; p1-&gt;id2 == p2-&gt;id2 ) 
<a name="l00687"></a>00687                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00688"></a>00688         <span class="keywordflow">else</span>
<a name="l00689"></a>00689                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00690"></a>00690 }
<a name="l00691"></a>00691 <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00692"></a>00692 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00693"></a>00693 <span class="preprocessor"></span><span class="preprocessor">        #define new DEBUG_NEW</span>
<a name="l00694"></a>00694 <span class="preprocessor"></span>        <span class="comment">//#define _CRTDBG_MAP_ALLOC</span>
<a name="l00695"></a>00695         CMemoryState oldMemState, newMemState, diffMemState;
<a name="l00696"></a>00696         <span class="keywordtype">void</span> <a class="code" href="_globals_8h.html#4779302133474bd9f6b50ee1355fb4a5">bug</a>() {
<a name="l00697"></a>00697                 AfxEnableMemoryTracking(TRUE);
<a name="l00698"></a>00698                 <span class="comment">//afxMemDF = allocMemDF | checkAlwaysMemDF;</span>
<a name="l00699"></a>00699                 oldMemState.Checkpoint();
<a name="l00700"></a>00700         }
<a name="l00701"></a>00701         <span class="keywordtype">void</span> <a class="code" href="_globals_8h.html#aa3c799d1df7d1686abb219e0853c8ff">gub</a>() {
<a name="l00702"></a>00702                 newMemState.Checkpoint();
<a name="l00703"></a>00703                 <span class="keywordflow">if</span>( diffMemState.Difference( oldMemState, newMemState ) )
<a name="l00704"></a>00704                 {
<a name="l00705"></a>00705                         diffMemState.DumpAllObjectsSince();
<a name="l00706"></a>00706                 }
<a name="l00707"></a>00707                 AfxEnableMemoryTracking(FALSE);
<a name="l00708"></a>00708                 <span class="comment">//_CrtDumpMemoryLeaks();</span>
<a name="l00709"></a>00709                 <span class="comment">//_CrtMemDumpAllObjectsSince(NULL);</span>
<a name="l00710"></a>00710         }
<a name="l00711"></a>00711 
<a name="l00712"></a>00712         <span class="keywordtype">void</span> <a class="code" href="_globals_8h.html#5ba73899fe15846cc99820005d978e24">tic</a>() {
<a name="l00713"></a>00713            <a class="code" href="_globals_8cpp.html#42d6a906ce66d6fb751de59ce631abb3">start</a> = clock();
<a name="l00714"></a>00714         }
<a name="l00715"></a>00715 
<a name="l00716"></a>00716         <span class="keywordtype">void</span> <a class="code" href="_globals_8h.html#3f604b0d492a343dd2c72ca7469b3cf7">toc</a>() {
<a name="l00717"></a>00717                 clock_t finish = clock();
<a name="l00718"></a>00718                 <span class="keywordtype">double</span> duration = (double)(finish - <a class="code" href="_globals_8cpp.html#42d6a906ce66d6fb751de59ce631abb3">start</a>);
<a name="l00719"></a>00719                 <a class="code" href="_globals_8h.html#474f2aaf6595e034a41c0dafa22e8427">echo</a>(String::Format(<span class="stringliteral">"It took {0} milliseconds"</span>, duration));
<a name="l00720"></a>00720         }
<a name="l00721"></a>00721 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Apr 24 22:32:50 2007 for New Vision by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
