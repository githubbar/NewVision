<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NewVision: AdaptiveBackgroundModelCD.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>AdaptiveBackgroundModelCD.h</h1><div class="fragment"><pre>00001 <span class="preprocessor">#pragma once</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#include "cv.h"</span>      
00003 <span class="preprocessor">#define CR_NOISE_THRESH 1.15</span>
00004 <span class="preprocessor"></span><span class="preprocessor">#define BR_NOISE_THRESH 0.05</span>
00005 <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_MINIMUM_B 0.55 </span>
00006 <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_FRAME_WEIGHT 0.05;</span>
00007 <span class="preprocessor"></span>
00008 <span class="comment">// utilizes brightness distortion/chromaticity distortion space</span>
00009 <span class="comment">// see horprasert99statistical.pdf</span>
00010 <span class="keyword">class </span>AdaptiveBackgroundModelCD : <span class="keyword">public</span> CObject {
00011     DECLARE_SERIAL( AdaptiveBackgroundModelCD )
00012 
00013     IplImage* mean; <span class="comment">// mean expected color value</span>
00014     IplImage* std; <span class="comment">// standard deviation of expected color value</span>
00015     IplImage* a; <span class="comment">// variation of intensity distortion</span>
00016     IplImage* b; <span class="comment">// variation of chromaticity distortion</span>
00017     IplImage* alpha; 
00018     IplImage* CD; 
00019 
00020     <span class="comment">// auxiliary variables</span>
00021     IplImage *temp32F1, *temp32F3, *dummy32F3, 
00022         *Nalpha, *NCD, *result1, *result2, *R, *G, *B;
00023 
00024     <span class="keywordtype">int</span> nFrames, width, height, nChannels;
00025     <span class="keywordtype">double</span> NewFrameWeight;
00026     <span class="keywordtype">bool</span> running;
00027 
00028 
00029 <span class="keyword">public</span>:
00030     AdaptiveBackgroundModelCD(<span class="keywordtype">void</span>);
00031     AdaptiveBackgroundModelCD(<span class="keywordtype">double</span> weight, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">int</span> nChannels);
00032     AdaptiveBackgroundModelCD(IplImage* frame);
00033     ~AdaptiveBackgroundModelCD(<span class="keywordtype">void</span>);
00034     <span class="keywordtype">void</span> CreateModel(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">int</span> nChannels);
00035     <span class="keywordtype">void</span> SetWeight(<span class="keywordtype">double</span> w);
00036     
00037     <span class="keywordtype">void</span> AccFrame(IplImage* frame); <span class="comment">// accumulate one frame</span>
00038     <span class="keywordtype">void</span> Initialize(); <span class="comment">// normalize the means after n - frames accumulated</span>
00039     <span class="keywordtype">void</span> Update(IplImage* frame); <span class="comment">// adaptively update BG</span>
00040     <span class="keywordtype">void</span> computeAlpha(IplImage* frame);
00041     <span class="keywordtype">void</span> computeCD(IplImage* frame);
00042     <span class="keywordtype">void</span> SubtractBackground(IplImage* frame, IplImage* result);
00043     <span class="keywordtype">void</span> SubtractBackground(IplImage* frame, IplImage* result, <span class="keywordtype">double</span> t);
00044     <span class="keywordtype">void</span> SubtractBackground(IplImage* frame, IplImage* result, <span class="keywordtype">double</span> t1, <span class="keywordtype">double</span> t2); 
00045     IplImage* GetMean();
00046     IplImage* GetStd();
00047     <span class="keywordtype">int</span> GetFrameCount();
00048     <span class="keywordtype">double</span> GetNewFrameWeight();
00049     <span class="keywordtype">void</span> SetNewFrameWeight(<span class="keywordtype">double</span>);
00050     IplImage* GetAlpha();
00051     IplImage* GetCD();
00052     IplImage* GetA();
00053     IplImage* GetB();
00054 
00055     <span class="keywordtype">void</span> Serialize( CArchive&amp; archive );
00056     <span class="keywordtype">void</span> SerializeImage(CArchive&amp; archive, IplImage** i);
00057 };
</pre></div><hr><address style="align: right;"><small>
Generated on Sun Mar 27 17:26:32 2005 for NewVision by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
