<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NewVision: Blob.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>Blob.h</h1><div class="fragment"><pre>00001 <span class="preprocessor">#if !defined (_BLOB_)</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _BLOB_</span>
00003 <span class="preprocessor"></span><span class="preprocessor">#pragma once</span>
00004 <span class="preprocessor"></span>
00005 <span class="preprocessor">#include "cv.h"</span>    
00006 <span class="preprocessor">#define MIN_PIX_TO_BE_OVER 2</span>
00007 <span class="preprocessor"></span>
00008 <span class="keyword">class </span>CNewVisionDoc;
00009 
00010 <span class="keyword">class </span>Blob {
00011     <span class="keyword">public</span>:
00012         CNewVisionDoc*  doc;
00013         CvSeq* contour;
00014         CvSeq* heads;
00015         CvPoint pos;
00016         CvPoint velocity;
00017         CvSize size;
00018 
00019                         Blob(<span class="keywordtype">void</span>);
00020                         Blob(CvSeq* contour, CNewVisionDoc* doc);
00021                         ~Blob(<span class="keywordtype">void</span>);
00022         <span class="keywordtype">void</span>            initPos();
00023         <span class="keywordtype">void</span>            initSize();
00024         CvSeq*          getContour();
00025         CvPoint         getPos();
00026         CvSize          getSize();
00027         CvPoint         getVelocity();
00028         <span class="keywordtype">void</span>            Draw(IplImage* frame, CvScalar color);
00029         <span class="keywordtype">void</span>            DrawHeight(IplImage* frame, CvScalar color);
00030         <span class="keywordtype">void</span>            Rasterize(IplImage* frame, CvScalar color);
00031         <span class="keywordtype">void</span>            merge(Blob* that);                         <span class="comment">// merge with another blob</span>
00032         <span class="keywordtype">double</span>          distance(Blob* that);                   <span class="comment">// find distance between two blobs</span>
00033         <span class="keywordtype">int</span>             numVertices();                             <span class="comment">// return the number of vertices</span>
00034         <span class="keywordtype">void</span>            getProjectionHistogram(CvSeq* hist);     
00035         CvPoint         intersectVZ2Contour(CvPoint pt);
00036         <span class="keywordtype">void</span>            InitHeadCandidates();
00037 
00038     <span class="keyword">private</span>:
00039         CvSeq*          copyContour(CvSeq* c); 
00040         <span class="keywordtype">void</span>            appendContour(CvSeq* c);
00041 };
00042 
00043 <span class="keyword">struct </span>BlobRay {
00044     CvPoint p1, p2;
00045     <span class="keywordtype">int</span> count;
00046 
00047     BlobRay(<span class="keywordtype">void</span>) {
00048         count = 0;
00049     };
00050 
00051     <span class="keywordtype">bool</span> isNeighbor(BlobRay* that, <span class="keywordtype">double</span> minDist) {
00052         <span class="keywordflow">if</span> (abs(p1.x-that-&gt;p1.x)+abs(p1.y-that-&gt;p1.y) &lt; minDist*minDist)
00053             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00054         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00055     };
00056     
00057     <span class="comment">// compare BlobRay elements based on count</span>
00058     <span class="keyword">static</span> <span class="keywordtype">int</span> cmp_count( <span class="keyword">const</span> <span class="keywordtype">void</span>* _a, <span class="keyword">const</span> <span class="keywordtype">void</span>* _b, <span class="keywordtype">void</span>* userdata )
00059     {
00060         BlobRay* a = (BlobRay*)_a;
00061         BlobRay* b = (BlobRay*)_b;
00062         <span class="keywordflow">return</span> a-&gt;count &gt; b-&gt;count ? -1 : a-&gt;count&lt; b-&gt;count? 1 : 0;
00063     };
00064 
00065     <span class="comment">// compare BlobRay elements based on p1.x</span>
00066     <span class="keyword">static</span> <span class="keywordtype">int</span> cmp_p1x( <span class="keyword">const</span> <span class="keywordtype">void</span>* _a, <span class="keyword">const</span> <span class="keywordtype">void</span>* _b, <span class="keywordtype">void</span>* userdata )
00067     {
00068         BlobRay* a = (BlobRay*)_a;
00069         BlobRay* b = (BlobRay*)_b;
00070         <span class="keywordflow">return</span> a-&gt;p1.x &gt; b-&gt;p1.x ? -1 : a-&gt;p1.x &lt; b-&gt;p1.x ? 1 : 0;
00071     };
00072 };
00073 
00074 <span class="preprocessor">#endif // !defined( _BLOB_ )</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon May 15 16:43:42 2006 for NewVision by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
